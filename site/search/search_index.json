{"config":{"lang":["ru","en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"en/","title":"Spirit \u2014 Overview","text":"<p>Spirit \u2014 is a privacy-first messenger that uses client-to-client store-and-forward on top of a relay network. Messages are end-to-end encrypted and routed through multiple hops using onion-style layered encryption. The server can act as a blind relay and/or a mailbox node.</p> <ul> <li>\ud83e\udded Goals: P2P/store-and-forward, minimal metadata, resilience without a mandatory VPN.</li> <li>\ud83d\udd10 Principles: E2EE, sealed sender (planned), fixed-size padded envelopes, replay protection.</li> <li>\ud83e\uddf1 Censorship resistance: multiple transports and domains, a fallback ladder, mailbox swarms, and multi-source bootstrap.</li> </ul> <p>Rename: the project was previously called AntiPidorandel (working title). The current name isSpirit.</p>"},{"location":"en/censorship/","title":"Censorship resistance","text":""},{"location":"en/censorship/#layered-approach","title":"Layered Approach","text":"<ol> <li>Transports: H3 (QUIC) \u2192 H2/WS(443) \u2192 SSE/long\u2011poll \u2192 TURN/WebRTC DataChannel.</li> <li>Infrastructure: multiple domains/ASN/clouds; some traffic via repeaters.</li> <li>P2P storage: mailer node swarms allow offline message delivery without a central domain.</li> <li>Bootstrap: signed list of endpoints in several showcases (GitHub Pages, mirrors).</li> <li>Availability telemetry (no identifiers): prompts clients for the order of transports.</li> </ol>"},{"location":"en/censorship/#what-to-consider","title":"What to consider","text":"<ul> <li>TLS fingerprint: as \"browser-like\" as possible. Headers - no exotics.</li> <li>Padding and jitter: fixed envelope size, random delivery delays.</li> <li>It\u2019s better not to count on \u201cdomain fronting\u201d, since it is closed almost everywhere.</li> <li>UDP can be blocked - a reliable path via TCP/H2/443 is required.</li> </ul>"},{"location":"en/configuration/","title":"Configuration","text":""},{"location":"en/configuration/#environment-variables-server","title":"Environment variables (server)","text":"Variable Default Description <code>DATABASE_URL</code> \u2014 DSN Postgres (necessarily) <code>ADDR</code> <code>:8080</code> HTTP/WS address <code>PENDING_BATCH</code> <code>1000</code> How much pending is given at a time <code>RETAIN_DELIVERED_MINUTES</code> <code>60</code> TTL delivered <code>RETAIN_UNDELIVERED_DAYS</code> <code>14</code> TTL undelivered <code>ALLOWED_ORIGINS</code> empty Allowed Origins (comma separated) <code>JANITOR_INTERVAL_SECONDS</code> <code>60</code> Background cleaning period <code>READ_TIMEOUT_SECONDS</code> <code>60</code> WS read timeout <code>WRITE_TIMEOUT_SECONDS</code> <code>20</code> WS write timeout <code>HANDSHAKE_TIMEOUT_SECONDS</code> <code>5</code> HTTP read-header timeout <code>NODE_ENABLED</code> <code>false</code> Enable HTTP Mailbox Host <code>NODE_PEERS</code> empty Neighboring nodes (comma separated) for replication <code>REQUIRE_ACK_SIGNATURE</code> <code>false</code> Require ACK signature (Ed25519)"},{"location":"en/configuration/#example-envexample","title":"Example <code>.env.example</code>","text":"<pre><code>DATABASE_URL=postgres://anti:anti@db:5432/anti?sslmode=disable\nADDR=:8080\nPENDING_BATCH=1000\nRETAIN_DELIVERED_MINUTES=60\nRETAIN_UNDELIVERED_DAYS=14\nALLOWED_ORIGINS=\nJANITOR_INTERVAL_SECONDS=60\nREAD_TIMEOUT_SECONDS=60\nWRITE_TIMEOUT_SECONDS=20\nHANDSHAKE_TIMEOUT_SECONDS=5\nNODE_ENABLED=true\nNODE_PEERS=\nREQUIRE_ACK_SIGNATURE=true\n</code></pre>"},{"location":"en/discovery/","title":"Discovery and Bootstrap","text":""},{"location":"en/discovery/#bootstrap-manifesto","title":"Bootstrap Manifesto","text":"<ul> <li>A signed file with a list of domains, IPs, ports and transport priorities.</li> <li>Splits into several \"showcases\" (GitHub Pages, mirrors, main site).</li> <li>The client caches and periodically updates; verifies the signature with the project key.</li> </ul>"},{"location":"en/discovery/#dht-later","title":"DHT (later)","text":"<ul> <li>Kademlia: <code>hash(PubKey) -&gt; swarm \u0443\u0437\u043b\u043e\u0432</code>.</li> <li>Record validation: signatures + rate\u2011limit.</li> </ul>"},{"location":"en/discovery/#happyeyeballs-for-transports","title":"Happy\u2011eyeballs for transports","text":"<ul> <li>The client tries H3\u2192H2/WS\u2192SSE/long\u2011poll\u2192TURN/WebRTC in parallel and chooses the first successful path.</li> </ul>"},{"location":"en/node-mailbox/","title":"Mailbox Node","text":"<p>The Mailbox node stores encrypted incoming envelopes using the recipient's key and delivers them upon request.</p>"},{"location":"en/node-mailbox/#purpose-of-a-swarm","title":"Purpose of a swarm","text":"<ul> <li><code>swarm = k</code> nodes based on consistent hash <code>hash(PubKey)</code>.</li> <li>The sender places an envelope on all <code>k</code> nodes (or <code>m</code> of <code>n</code> in erasure coding).</li> <li>The receiver periodically <code>GET</code>s to its relay flock and removes envelopes via <code>ACK</code> (signed).</li> </ul>"},{"location":"en/node-mailbox/#http-api","title":"HTTP API","text":""},{"location":"en/node-mailbox/#post-nodeput","title":"<code>POST /node/put</code>","text":"<p>Puts down the envelope. <pre><code>{\n  \"to\": \"bob\",\n  \"message_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"header_b64\": \"...\",\n  \"nonce_b64\": \"...\",\n  \"cipher_b64\": \"...\",\n  \"ttl_seconds\": 1209600\n}\n</code></pre></p>"},{"location":"en/node-mailbox/#get-nodegettouser","title":"<code>GET /node/get?to=&lt;user&gt;</code>","text":"<p>Returns a list of envelopes (up to <code>PENDING_BATCH</code>).</p>"},{"location":"en/node-mailbox/#post-nodeack","title":"<code>POST /node/ack</code>","text":"<p>Deletes by <code>message_id</code>. Recommended to sign: <pre><code>{\n  \"message_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"pubkey_b64\": \"&lt;ed25519-pub&gt;\",\n  \"sig_b64\": \"&lt;ed25519-sign('ack:'+message_id)&gt;\"\n}\n</code></pre></p>"},{"location":"en/node-mailbox/#replication-and-neighbor-nodes","title":"Replication and neighbor nodes","text":"<ul> <li>After <code>put</code>, the node can replicate to <code>NODE_PEERS</code> (best\u2011effort).</li> <li>ACK removal occurs on all replicas.</li> </ul>"},{"location":"en/operations/","title":"Operations","text":"<ul> <li><code>/healthz</code> \u2014 alive/ready (200 ok).</li> <li>\u041b\u043e\u0433\u0438 \u2014 stdout/stderr (Docker best practice).</li> <li>Image - distroless:nonroot.</li> <li>Monitoring (plan): Prometheus metrics.</li> </ul>"},{"location":"en/operations/#deploying-a-flock-of-repeaters","title":"Deploying a \"flock\" of repeaters","text":"<ul> <li>Set up 3-5 mail nodes in different clouds/ASN.</li> <li>Enable <code>NODE_ENABLED=true</code> and configure <code>NODE_PEERS</code> for replication.</li> <li>Set up backup domains/certificates.</li> </ul>"},{"location":"en/operations/#backups","title":"Backups","text":"<ul> <li>Scheduled DB dump; encrypted storage.</li> </ul>"},{"location":"en/protocol/","title":"Protocol","text":""},{"location":"en/protocol/#websocket-frames-mvp","title":"WebSocket frames (MVP)","text":"<pre><code>// client -&gt; server\n{ \"type\":\"send\", \"to\":\"&lt;user&gt;\", \"message_id\":\"&lt;uuid&gt;\", \"header_b64\":\"...\", \"nonce_b64\":\"...\", \"cipher_b64\":\"...\" }\n{ \"type\":\"ack\",  \"message_id\":\"&lt;uuid&gt;\", \"ack_pubkey_b64\":\"...\", \"ack_sig_b64\":\"...\" }\n{ \"type\":\"ping\" }\n\n// server -&gt; client\n{ \"type\":\"deliver\", \"to\":\"&lt;user&gt;\", \"message_id\":\"&lt;uuid&gt;\", \"header_b64\":\"...\", \"nonce_b64\":\"...\", \"cipher_b64\":\"...\" }\n{ \"type\":\"pong\" }\n</code></pre> <p><code>ack_pubkey_b64/ack_sig_b64</code> are optional fields. If <code>REQUIRE_ACK_SIGNATURE=true</code> is enabled, the server checks <code>Ed25519.Verify(pub, \"ack:\"+uuid, sig)</code>.</p>"},{"location":"en/protocol/#http-mailbox","title":"HTTP Mailbox","text":"<p>Endpoints: <code>/node/put</code>, <code>/node/get</code>, <code>/node/ack</code>. See the Mailer Nodes section for details.</p>"},{"location":"en/quickstart/","title":"Quick start","text":""},{"location":"en/quickstart/#requirements","title":"Requirements","text":"<ul> <li>Docker Desktop / Docker Engine</li> <li>Ports <code>8080</code> \u0438 <code>5432</code> are free</li> </ul>"},{"location":"en/quickstart/#run-locally-docker-compose","title":"Run locally (docker-compose)","text":"<pre><code>docker compose up -d --build\ndocker compose logs -f server\ncurl http://localhost:8080/healthz   # -&gt; ok\n</code></pre>"},{"location":"en/quickstart/#manual-server-start","title":"Manual server start","text":"<pre><code>export DATABASE_URL=\"postgres://anti:anti@localhost:5432/anti?sslmode=disable\"\ncd server\ngo run ./cmd/server\n</code></pre>"},{"location":"en/quickstart/#enabling-the-mailer-node-http-api","title":"Enabling the Mailer Node (HTTP API)","text":"<p>In environment variables: <pre><code>NODE_ENABLED=true\nREQUIRE_ACK_SIGNATURE=true   # optional (recommended)\n</code></pre> Endpoints will appear under <code>/node/*</code>. See \"Node Mailbox\".</p>"},{"location":"en/roadmap/","title":"Roadmap","text":"<ul> <li>[ ] X3DH + Double Ratchet (Signal-like ratchet)</li> <li>[ ] Sealed sender</li> <li>[ ] Replication of mailer nodes (k of n, erasure coding)</li> <li>[ ] DHT (Kademlia) for discovery</li> <li>[ ] Observability: Prometheus, /readyz, /livez</li> <li>[ ] Alternative transports: gRPC streams, WebRTC DC</li> <li>[ ] Clients: Desktop (Tauri), Mobile (Flutter)</li> </ul>"},{"location":"en/routing-onion/","title":"P2P and Onion Routing","text":""},{"location":"en/routing-onion/#idea","title":"Idea","text":"<p>A message is encrypted in layers (\"onion\") for a chain of hops: each hop knows only the next one. Nodes act as relays and/or temporary store-and-forward holders.</p>"},{"location":"en/routing-onion/#layers","title":"Layers","text":"<ul> <li>Outer layer: address of the next hop (public key), MAC, TTL.</li> <li>Inner layers: repeated for each hop.</li> <li>The innermost layer is an encrypted envelope for the recipient (AEAD).</li> </ul>"},{"location":"en/routing-onion/#route-selection","title":"Route Selection","text":"<ul> <li>3 hops by default (configurable).</li> <li>Selected from a pool of nodes: randomly, considering ASN/provider diversity.</li> <li>For offline delivery, the last hop is one of the recipient's flock mailbox nodes.</li> </ul> <pre><code>flowchart LR\n    A[Sender] --&gt; H1[Hop 1]\n    H1 --&gt; H2[Hop 2]\n    H2 --&gt; H3[Hop 3 / Mailbox]\n    H3 --&gt; B[Recipient]\n</code></pre>"},{"location":"en/security/","title":"Security","text":""},{"location":"en/security/#possible-threats","title":"Possible Threats","text":"<ul> <li>Passive network observer (DPI, ISP).</li> <li>Partially malicious relays.</li> <li>Loss of mailbox node.</li> <li>Replays/spam/queue overflow.</li> </ul>"},{"location":"en/security/#measures","title":"Measures","text":"<ul> <li>E2EE: servers see only the padded envelope (AEAD).</li> <li>Sealed sender (planned): hide the sender from relays.</li> <li>Signed ACK (Ed25519): only the inbox owner can delete.</li> <li>Idempotency by <code>message_id</code> (UUIDv7/ULID).</li> <li>PoW/quotas/ban by key on <code>PUT</code>.</li> <li>Logs without payload/PII; encrypted DB backups.</li> </ul>"},{"location":"en/storage/","title":"Storage (PostgreSQL)","text":""},{"location":"en/storage/#table-messages","title":"Table <code>messages</code>","text":"<pre><code>CREATE TABLE IF NOT EXISTS messages (\n    id           UUID PRIMARY KEY,\n    to_user      TEXT        NOT NULL,\n    header       BYTEA,\n    nonce        BYTEA       NOT NULL,\n    cipher       BYTEA       NOT NULL,\n    created_at   TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    delivered_at TIMESTAMPTZ,\n    expires_at   TIMESTAMPTZ\n);\nCREATE INDEX IF NOT EXISTS idx_inbox_pending\n    ON messages (to_user, created_at) WHERE delivered_at IS NULL;\nCREATE INDEX IF NOT EXISTS idx_expiry ON messages (expires_at);\n</code></pre> <ul> <li>Delivered messages are deleted after <code>RETAIN_DELIVERED_MINUTES</code>.</li> <li>Undelivered messages \u2014 after <code>RETAIN_UNDELIVERED_DAYS</code>.</li> <li>Mailbox nodes can replicate via <code>NODE_PEERS</code> (optional).</li> </ul>"},{"location":"en/adr/0001-project-rename-and-goals/","title":"ADR-0001: Project Rename and Goals","text":"<p>Date: 2025-08-14 Status: Accepted</p>"},{"location":"en/adr/0001-project-rename-and-goals/#context","title":"Context","text":"<p>The working name AntiPidorandel has been changed to Spirit. The goals have been clarified: P2P/store-and-forward, onion routing, resilience without VPN.</p>"},{"location":"en/adr/0001-project-rename-and-goals/#decision","title":"Decision","text":"<ul> <li>The repository and documentation are maintained under the name Spirit.</li> <li>Focus on minimizing metadata and resistance to blocking.</li> </ul>"},{"location":"en/adr/0001-project-rename-and-goals/#consequences","title":"Consequences","text":"<ul> <li>Unified brand/name; roadmap and architecture updated.</li> </ul>"},{"location":"en/adr/0002-choose-go-postgres/","title":"ADR-0002: Choosing Go + PostgreSQL","text":"<p>Date: 2025-08-14 Status: Accepted</p>"},{"location":"en/adr/0002-choose-go-postgres/#context","title":"Context","text":"<p>A fast and easy-to-deploy stack with minimal dependencies is needed.</p>"},{"location":"en/adr/0002-choose-go-postgres/#decision","title":"Decision","text":"<ul> <li>Backend: Go 1.23+ (<code>gorilla/websocket</code>, <code>pgx</code>).</li> <li>Storage: PostgreSQL 16+ (indexes, reliability, simple TTL policies).</li> </ul>"},{"location":"en/adr/0002-choose-go-postgres/#alternatives","title":"Alternatives","text":"<ul> <li>Rust/Node \u2014 postponed until post-MVP for time-to-market reasons.</li> </ul>"},{"location":"en/adr/0002-choose-go-postgres/#consequences","title":"Consequences","text":"<ul> <li>High performance and ease of operation.</li> </ul>"},{"location":"en/adr/0003-ws-frame-contract/","title":"ADR-0003: WebSocket Frame Contract","text":"<p>Date: 2025-08-14 Status: Accepted</p>"},{"location":"en/adr/0003-ws-frame-contract/#context","title":"Context","text":"<p>A simple and compatible delivery and acknowledgment contract is needed.</p>"},{"location":"en/adr/0003-ws-frame-contract/#decision","title":"Decision","text":"<ul> <li>Types: <code>send</code>, <code>deliver</code>, <code>ack</code>, <code>ping</code>, <code>pong</code>.</li> <li>Binary fields \u2014 base64.</li> <li>Idempotency by <code>message_id</code>.</li> <li>Optionally \u2014 <code>ack_pubkey_b64</code> and <code>ack_sig_b64</code> (Ed25519).</li> </ul>"},{"location":"en/adr/0003-ws-frame-contract/#consequences","title":"Consequences","text":"<ul> <li>Minimal client changes when adding ACK signature support.</li> </ul>"},{"location":"en/adr/0004-mailbox-node-api/","title":"ADR-0004: Mailbox Node API","text":"<p>Date: 2025-08-14 Status: Accepted</p>"},{"location":"en/adr/0004-mailbox-node-api/#context","title":"Context","text":"<p>A store-and-forward layer without a single point of failure is needed.</p>"},{"location":"en/adr/0004-mailbox-node-api/#decision","title":"Decision","text":"<ul> <li>HTTP API <code>/node/put</code>, <code>/node/get</code>, <code>/node/ack</code>.</li> <li>Signed ACK (Ed25519) for the string <code>ack:&lt;uuid&gt;</code> (optional).</li> <li>Replication to <code>NODE_PEERS</code> (best-effort).</li> </ul>"},{"location":"en/adr/0004-mailbox-node-api/#consequences","title":"Consequences","text":"<ul> <li>Delivery works even if the main domain is unavailable.</li> </ul>"},{"location":"en/adr/0005-censorship-resilience/","title":"ADR-0005: Censorship Resilience","text":"<p>Date: 2025-08-14 Status: Accepted</p>"},{"location":"en/adr/0005-censorship-resilience/#context","title":"Context","text":"<p>Operation is needed under network blocking conditions without mandatory VPN.</p>"},{"location":"en/adr/0005-censorship-resilience/#decision","title":"Decision","text":"<ul> <li>Transport ladder: H3 \u2192 H2/WS \u2192 SSE/long-poll \u2192 TURN/WebRTC.</li> <li>Multiple domains/ASNs; flocks of mailbox nodes.</li> <li>Signed bootstrap manifest from multiple sources.</li> </ul>"},{"location":"en/adr/0005-censorship-resilience/#consequences","title":"Consequences","text":"<ul> <li>Increased resilience; more complex operation (multiple providers).</li> </ul>"},{"location":"ru/","title":"Spirit \u2014 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f","text":"<p>Spirit \u2014 \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u044b\u0439 \u043c\u0435\u0441\u0441\u0435\u043d\u0434\u0436\u0435\u0440 \u0441 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435\u043c \u00ab\u043e\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043a \u043a\u043b\u0438\u0435\u043d\u0442\u0443\u00bb (store-and-forward) \u043f\u043e\u0432\u0435\u0440\u0445 \u0441\u0435\u0442\u0438 \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0442\u043e\u0440\u043e\u0432. \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0448\u0438\u0444\u0440\u0443\u044e\u0442\u0441\u044f end\u2011to\u2011end \u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u0441\u043b\u043e\u044f\u043c\u0438 (\u043b\u0443\u043a\u043e\u0432\u0430\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u044f) \u0447\u0435\u0440\u0435\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e hop\u2019\u043e\u0432. \u0421\u0435\u0440\u0432\u0435\u0440 \u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043a\u0430\u043a \u00ab\u0441\u043b\u0435\u043f\u043e\u0439\u00bb \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0442\u043e\u0440 \u0438/\u0438\u043b\u0438 \u043a\u0430\u043a \u0443\u0437\u0435\u043b\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a.</p> <ul> <li>\ud83e\udded \u0426\u0435\u043b\u0438: P2P/store\u2011and\u2011forward, \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0442\u0430\u0434\u0430\u043d\u043d\u044b\u0435, \u0436\u0438\u0432\u0443\u0447\u0435\u0441\u0442\u044c \u0431\u0435\u0437 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e VPN.</li> <li>\ud83d\udd10 \u041f\u0440\u0438\u043d\u0446\u0438\u043f\u044b: E2EE, (\u043f\u043b\u0430\u043d) sealed sender, \u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u043e\u0432 (\u043f\u0430\u0434\u0434\u0438\u043d\u0433), \u0437\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u043f\u043e\u0432\u0442\u043e\u0440\u043e\u0432.</li> <li>\ud83e\uddf1 \u0423\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c \u043a \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430\u043c: \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u044b \u0438 \u0434\u043e\u043c\u0435\u043d\u044b, fallback\u2011\u043b\u0435\u0441\u0442\u043d\u0438\u0446\u0430, \u0441\u0442\u0430\u0438 \u0445\u0440\u0430\u043d\u0438\u0442\u0435\u043b\u0435\u0439, \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0430\u043d\u0430\u043b\u043e\u0432 \u0431\u0443\u0442\u0441\u0442\u0440\u0430\u043f\u0430.</li> </ul> <p>\u041f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435: \u043f\u0440\u043e\u0435\u043a\u0442 \u0440\u0430\u043d\u0435\u0435 \u043d\u0430\u0437\u044b\u0432\u0430\u043b\u0441\u044f AntiPidorandel(\u0427\u0435\u0440\u043d\u043e\u0432\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435). \u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0438\u043c\u044f \u2014 Spirit.</p>"},{"location":"ru/censorship/","title":"\u0426\u0435\u043d\u0437\u0443\u0440\u043e\u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c","text":""},{"location":"ru/censorship/#_2","title":"\u041c\u043d\u043e\u0433\u043e\u0441\u043b\u043e\u0439\u043d\u044b\u0439 \u043f\u043e\u0434\u0445\u043e\u0434","text":"<ol> <li>\u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u044b: H3 (QUIC) \u2192 H2/WS(443) \u2192 SSE/long\u2011poll \u2192 TURN/WebRTC DataChannel.</li> <li>\u0418\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430: \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u043e\u043c\u0435\u043d\u043e\u0432/ASN/\u043e\u0431\u043b\u0430\u043a\u043e\u0432; \u0447\u0430\u0441\u0442\u044c \u0442\u0440\u0430\u0444\u0438\u043a\u0430 \u0447\u0435\u0440\u0435\u0437 \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0442\u043e\u0440\u044b.</li> <li>P2P \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435: \u0441\u0442\u0430\u0438 \u0443\u0437\u043b\u043e\u0432\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u043e\u0432 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u043e\u0444\u043b\u0430\u0439\u043d\u2011\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0431\u0435\u0437 \u0446\u0435\u043d\u0442\u0440\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0435\u043d\u0430.</li> <li>\u0411\u0443\u0442\u0441\u0442\u0440\u0430\u043f: \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u044d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u043e\u0432 \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0432\u0438\u0442\u0440\u0438\u043d\u0430\u0445 (GitHub Pages, \u0437\u0435\u0440\u043a\u0430\u043b\u0430).</li> <li>\u0422\u0435\u043b\u0435\u043c\u0435\u0442\u0440\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 (\u0431\u0435\u0437 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u0432): \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u043c \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043e\u0432.</li> </ol>"},{"location":"ru/censorship/#_3","title":"\u0427\u0442\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c","text":"<ul> <li>\u041e\u0442\u043f\u0435\u0447\u0430\u0442\u043e\u043a TLS: \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u00ab\u043f\u043e\u0445\u043e\u0436 \u043d\u0430 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u00bb. \u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u2014 \u0431\u0435\u0437 \u044d\u043a\u0437\u043e\u0442\u0438\u043a\u0438.</li> <li>\u041f\u0430\u0434\u0434\u0438\u043d\u0433 \u0438 \u0434\u0436\u0438\u0442\u0442\u0435\u0440: \u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u043e\u0432, \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0435 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0438 \u0432\u044b\u0434\u0430\u0447\u0438.</li> <li>\u041b\u0443\u0447\u0448\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043d\u0430 \u00abdomain fronting\u00bb, \u0442.\u043a. \u043e\u043d \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u0435\u0437\u0434\u0435 \u0437\u0430\u043a\u0440\u044b\u0442.</li> <li>UDP \u043c\u043e\u0436\u0435\u0442 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u2014 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d \u043d\u0430\u0434\u0451\u0436\u043d\u044b\u0439 \u043f\u0443\u0442\u044c \u043f\u043e TCP/H2/443.</li> </ul>"},{"location":"ru/configuration/","title":"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f","text":""},{"location":"ru/configuration/#_2","title":"\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f (\u0441\u0435\u0440\u0432\u0435\u0440)","text":"\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 <code>DATABASE_URL</code> \u2014 DSN Postgres (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e) <code>ADDR</code> <code>:8080</code> \u0410\u0434\u0440\u0435\u0441 HTTP/WS <code>PENDING_BATCH</code> <code>1000</code> \u0421\u043a\u043e\u043b\u044c\u043a\u043e pending \u043e\u0442\u0434\u0430\u0451\u0442\u0441\u044f \u0437\u0430 \u0440\u0430\u0437 <code>RETAIN_DELIVERED_MINUTES</code> <code>60</code> TTL \u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445 <code>RETAIN_UNDELIVERED_DAYS</code> <code>14</code> TTL \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445 <code>ALLOWED_ORIGINS</code> \u043f\u0443\u0441\u0442\u043e \u0420\u0430\u0437\u0440\u0435\u0448\u0451\u043d\u043d\u044b\u0435 Origin (\u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e) <code>JANITOR_INTERVAL_SECONDS</code> <code>60</code> \u041f\u0435\u0440\u0438\u043e\u0434 \u0444\u043e\u043d\u043e\u0432\u043e\u0439 \u043e\u0447\u0438\u0441\u0442\u043a\u0438 <code>READ_TIMEOUT_SECONDS</code> <code>60</code> WS read timeout <code>WRITE_TIMEOUT_SECONDS</code> <code>20</code> WS write timeout <code>HANDSHAKE_TIMEOUT_SECONDS</code> <code>5</code> HTTP read-header timeout <code>NODE_ENABLED</code> <code>false</code> \u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c HTTP-\u0443\u0437\u0435\u043b \u043f\u043e\u0447\u0442\u043e\u0432\u043e\u0433\u043e \u044f\u0449\u0438\u043a\u0430 <code>NODE_PEERS</code> \u043f\u0443\u0441\u0442\u043e \u0421\u043e\u0441\u0435\u0434\u043d\u0438\u0435 \u0443\u0437\u043b\u044b (\u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e) \u0434\u043b\u044f \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u0438 <code>REQUIRE_ACK_SIGNATURE</code> <code>false</code> \u0422\u0440\u0435\u0431\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u044c ACK (Ed25519)"},{"location":"ru/configuration/#envexample","title":"\u041f\u0440\u0438\u043c\u0435\u0440 <code>.env.example</code>","text":"<pre><code>DATABASE_URL=postgres://anti:anti@db:5432/anti?sslmode=disable\nADDR=:8080\nPENDING_BATCH=1000\nRETAIN_DELIVERED_MINUTES=60\nRETAIN_UNDELIVERED_DAYS=14\nALLOWED_ORIGINS=\nJANITOR_INTERVAL_SECONDS=60\nREAD_TIMEOUT_SECONDS=60\nWRITE_TIMEOUT_SECONDS=20\nHANDSHAKE_TIMEOUT_SECONDS=5\nNODE_ENABLED=true\nNODE_PEERS=\nREQUIRE_ACK_SIGNATURE=true\n</code></pre>"},{"location":"ru/node-mailbox/","title":"\u0423\u0437\u043b\u044b\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u0438 (Mailbox Node)","text":"<p>\u0423\u0437\u0435\u043b\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a \u0445\u0440\u0430\u043d\u0438\u0442 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u044b \u00ab\u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445\u00bb \u043f\u043e \u043a\u043b\u044e\u0447\u0443 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f \u0438 \u043e\u0442\u0434\u0430\u0451\u0442 \u0438\u0445 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443.</p>"},{"location":"ru/node-mailbox/#swarm","title":"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0438 \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0442\u043e\u0440\u043e\u0432 (swarm)","text":"<ul> <li><code>swarm = k</code> \u0443\u0437\u043b\u043e\u0432 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043a\u043e\u043d\u0441\u0438\u0441\u0442\u0435\u043d\u0442\u043d\u043e\u0433\u043e \u0445\u0435\u0448\u0430 <code>hash(PubKey)</code>.</li> <li>\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c \u043a\u043b\u0430\u0434\u0451\u0442 \u043a\u043e\u043d\u0432\u0435\u0440\u0442 \u043d\u0430 \u0432\u0441\u0435 <code>k</code> \u0443\u0437\u043b\u043e\u0432 (\u0438\u043b\u0438 <code>m</code> \u0438\u0437 <code>n</code> \u043f\u0440\u0438 \u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0441\u0442\u0438\u0440\u0430\u043d\u0438\u044f).</li> <li>\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044c \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 <code>GET</code> \u043a \u0441\u0432\u043e\u0435\u0439 \u0441\u0442\u0430\u0435 \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0442\u043e\u0440\u043e\u0432 \u0438 \u0443\u0434\u0430\u043b\u044f\u0435\u0442 \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u044b \u0447\u0435\u0440\u0435\u0437 <code>ACK</code> (\u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439).</li> </ul>"},{"location":"ru/node-mailbox/#http-api","title":"HTTP API","text":""},{"location":"ru/node-mailbox/#post-nodeput","title":"<code>POST /node/put</code>","text":"<p>\u041a\u043b\u0430\u0434\u0451\u0442 \u043a\u043e\u043d\u0432\u0435\u0440\u0442. <pre><code>{\n  \"to\": \"bob\",\n  \"message_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"header_b64\": \"...\",\n  \"nonce_b64\": \"...\",\n  \"cipher_b64\": \"...\",\n  \"ttl_seconds\": 1209600\n}\n</code></pre></p>"},{"location":"ru/node-mailbox/#get-nodegettouser","title":"<code>GET /node/get?to=&lt;user&gt;</code>","text":"<p>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u043e\u0432 (\u0434\u043e <code>PENDING_BATCH</code>).</p>"},{"location":"ru/node-mailbox/#post-nodeack","title":"<code>POST /node/ack</code>","text":"<p>\u0423\u0434\u0430\u043b\u044f\u0435\u0442 \u043f\u043e <code>message_id</code>. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c: <pre><code>{\n  \"message_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"pubkey_b64\": \"&lt;ed25519-pub&gt;\",\n  \"sig_b64\": \"&lt;ed25519-sign('ack:'+message_id)&gt;\"\n}\n</code></pre></p>"},{"location":"ru/node-mailbox/#_1","title":"\u0420\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u0438 \u0441\u043e\u0441\u0435\u0434\u043d\u0438\u0435 \u0443\u0437\u043b\u044b","text":"<ul> <li>\u041f\u043e\u0441\u043b\u0435 <code>put</code> \u0443\u0437\u0435\u043b \u043c\u043e\u0436\u0435\u0442 \u0440\u0435\u043f\u043b\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430 <code>NODE_PEERS</code> (best\u2011effort).</li> <li>\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u043e ACK \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043d\u0430 \u0432\u0441\u0435\u0445 \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0445.</li> </ul>"},{"location":"ru/operations/","title":"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438","text":"<ul> <li><code>/healthz</code> \u2014 \u0436\u0438\u0432/\u0433\u043e\u0442\u043e\u0432 (200 ok).</li> <li>\u041b\u043e\u0433\u0438 \u2014 stdout/stderr (Docker best practice).</li> <li>\u041e\u0431\u0440\u0430\u0437 \u2014 distroless:nonroot.</li> <li>\u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 (\u043f\u043b\u0430\u043d): \u043c\u0435\u0442\u0440\u0438\u043a\u0438 Prometheus.</li> </ul>"},{"location":"ru/operations/#_2","title":"\u0414\u0435\u043f\u043b\u043e\u0439 \u00ab\u0441\u0442\u0430\u0438\u00bb","text":"<ul> <li>\u041f\u043e\u0434\u043d\u0438\u043c\u0438\u0442\u0435 3\u20135 \u0443\u0437\u043b\u043e\u0432\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u043e\u0432 \u0432 \u0440\u0430\u0437\u043d\u044b\u0445 \u043e\u0431\u043b\u0430\u043a\u0430\u0445/ASN.</li> <li>\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0435 <code>NODE_ENABLED=true</code> \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 <code>NODE_PEERS</code> \u0434\u043b\u044f \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u0438.</li> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u044b\u0435 \u0434\u043e\u043c\u0435\u043d\u044b/\u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b.</li> </ul>"},{"location":"ru/operations/#_3","title":"\u0411\u044d\u043a\u0430\u043f\u044b","text":"<ul> <li>\u0414\u0430\u043c\u043f \u0411\u0414 \u043f\u043e \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044e; \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0432 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u043c \u0432\u0438\u0434\u0435.</li> </ul>"},{"location":"ru/protocol/","title":"\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b","text":""},{"location":"ru/protocol/#websocket-mvp","title":"WebSocket \u043a\u0430\u0434\u0440\u044b (MVP)","text":"<pre><code>// client -&gt; server\n{ \"type\":\"send\", \"to\":\"&lt;user&gt;\", \"message_id\":\"&lt;uuid&gt;\", \"header_b64\":\"...\", \"nonce_b64\":\"...\", \"cipher_b64\":\"...\" }\n{ \"type\":\"ack\",  \"message_id\":\"&lt;uuid&gt;\", \"ack_pubkey_b64\":\"...\", \"ack_sig_b64\":\"...\" }\n{ \"type\":\"ping\" }\n\n// server -&gt; client\n{ \"type\":\"deliver\", \"to\":\"&lt;user&gt;\", \"message_id\":\"&lt;uuid&gt;\", \"header_b64\":\"...\", \"nonce_b64\":\"...\", \"cipher_b64\":\"...\" }\n{ \"type\":\"pong\" }\n</code></pre> <p><code>ack_pubkey_b64/ack_sig_b64</code> \u2014 \u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f. \u0415\u0441\u043b\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e <code>REQUIRE_ACK_SIGNATURE=true</code>, \u0441\u0435\u0440\u0432\u0435\u0440 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 <code>Ed25519.Verify(pub, \"ack:\"+uuid, sig)</code>.</p>"},{"location":"ru/protocol/#http-mailbox","title":"HTTP Mailbox","text":"<p>\u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b: <code>/node/put</code>, <code>/node/get</code>, <code>/node/ack</code>. \u0421\u043c. \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0441\u0442\u0438 \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u00ab\u0423\u0437\u043b\u044b\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u0438\u00bb.</p>"},{"location":"ru/quickstart/","title":"\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442","text":""},{"location":"ru/quickstart/#_2","title":"\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f","text":"<ul> <li>Docker Desktop / Docker Engine</li> <li>\u041f\u043e\u0440\u0442\u044b <code>8080</code> \u0438 <code>5432</code> \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b</li> </ul>"},{"location":"ru/quickstart/#docker-compose","title":"\u0417\u0430\u043f\u0443\u0441\u043a \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e (docker-compose)","text":"<pre><code>docker compose up -d --build\ndocker compose logs -f server\ncurl http://localhost:8080/healthz   # -&gt; ok\n</code></pre>"},{"location":"ru/quickstart/#_3","title":"\u0420\u0443\u0447\u043d\u043e\u0439 \u0437\u0430\u043f\u0443\u0441\u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0430","text":"<pre><code>export DATABASE_URL=\"postgres://anti:anti@localhost:5432/anti?sslmode=disable\"\ncd server\ngo run ./cmd/server\n</code></pre>"},{"location":"ru/quickstart/#-http-api","title":"\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0443\u0437\u043b\u0430-\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u0430 (HTTP API)","text":"<p>\u0412 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f: <pre><code>NODE_ENABLED=true\nREQUIRE_ACK_SIGNATURE=true   # \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)\n</code></pre> \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u043f\u043e\u0434 <code>/node/*</code>. \u0421\u043c. \u00ab\u0423\u0437\u043b\u044b\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u0438\u00bb.</p>"},{"location":"ru/roadmap/","title":"\u0414\u043e\u0440\u043e\u0436\u043d\u0430\u044f \u043a\u0430\u0440\u0442\u0430","text":"<ul> <li>[ ] X3DH + Double Ratchet (Signal-\u043f\u043e\u0434\u043e\u0431\u043d\u044b\u0439 \u0440\u0430\u0442\u0447\u0435\u0442)</li> <li>[ ] Sealed sender</li> <li>[ ] \u0420\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u0443\u0437\u043b\u043e\u0432\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u043e\u0432 (k \u0438\u0437 n, erasure coding)</li> <li>[ ] DHT (Kademlia) \u0434\u043b\u044f discovery</li> <li>[ ] \u041d\u0430\u0431\u043b\u044e\u0434\u0430\u0435\u043c\u043e\u0441\u0442\u044c: Prometheus, /readyz, /livez</li> <li>[ ] \u0410\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u044b: gRPC streams, WebRTC DC</li> <li>[ ] \u041a\u043b\u0438\u0435\u043d\u0442\u044b: Desktop (Tauri), Mobile (Flutter)</li> </ul>"},{"location":"ru/routing-onion/","title":"P2P \u0438 \u043b\u0443\u043a\u043e\u0432\u0430\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u044f","text":""},{"location":"ru/routing-onion/#_1","title":"\u0418\u0434\u0435\u044f","text":"<p>\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0448\u0438\u0444\u0440\u0443\u0435\u0442\u0441\u044f \u0441\u043b\u043e\u044f\u043c\u0438 (\u00ab\u043b\u0443\u043a\u043e\u0432\u0438\u0446\u0430\u00bb) \u0434\u043b\u044f \u0446\u0435\u043f\u043e\u0447\u043a\u0438 hop\u2019\u043e\u0432: \u043a\u0430\u0436\u0434\u044b\u0439 hop \u0437\u043d\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439. \u0423\u0437\u043b\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442 \u0440\u043e\u043b\u044c \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0442\u043e\u0440\u043e\u0432 \u0438/\u0438\u043b\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0445\u0440\u0430\u043d\u0438\u0442\u0435\u043b\u0435\u0439 (store\u2011and\u2011forward).</p>"},{"location":"ru/routing-onion/#_2","title":"\u0421\u043b\u043e\u0438","text":"<ul> <li>\u0412\u043d\u0435\u0448\u043d\u0438\u0439 \u0441\u043b\u043e\u0439: \u0430\u0434\u0440\u0435\u0441 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e hop (\u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u043b\u044e\u0447), MAC, TTL.</li> <li>\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0435 \u0441\u043b\u043e\u0438: \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e hop.</li> <li>\u0421\u0430\u043c\u044b\u0439 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0441\u043b\u043e\u0439 \u2014 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0432\u0435\u0440\u0442 \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f (AEAD).</li> </ul>"},{"location":"ru/routing-onion/#_3","title":"\u0412\u044b\u0431\u043e\u0440 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430","text":"<ul> <li>3 hop\u2019\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e (\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u0443\u0435\u043c\u043e).</li> <li>\u0412\u044b\u0431\u0438\u0440\u0430\u044e\u0442\u0441\u044f \u0438\u0437 \u043f\u0443\u043b\u0430 \u0443\u0437\u043b\u043e\u0432: \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e, \u0441 \u0443\u0447\u0451\u0442\u043e\u043c \u0440\u0430\u0437\u043d\u043e\u043e\u0431\u0440\u0430\u0437\u0438\u044f ASN/\u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u043e\u0432.</li> <li>\u0414\u043b\u044f \u043e\u0444\u043b\u0430\u0439\u043d\u2011\u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 hop \u2014 \u043e\u0434\u0438\u043d \u0438\u0437 \u0443\u0437\u043b\u043e\u0432\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u043e\u0432 \u0441\u0442\u0430\u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f.</li> </ul> <pre><code>flowchart LR\n    A[\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c] --&gt; H1[Hop 1]\n    H1 --&gt; H2[Hop 2]\n    H2 --&gt; H3[Hop 3 / Mailbox]\n    H3 --&gt; B[\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044c]\n</code></pre>"},{"location":"ru/security/","title":"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","text":""},{"location":"ru/security/#_2","title":"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u0443\u0433\u0440\u043e\u0437\u044b","text":"<ul> <li>\u041f\u0430\u0441\u0441\u0438\u0432\u043d\u044b\u0439 \u043d\u0430\u0431\u043b\u044e\u0434\u0430\u0442\u0435\u043b\u044c \u0441\u0435\u0442\u0438 (DPI, \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440).</li> <li>\u0427\u0430\u0441\u0442\u0438\u0447\u043d\u043e \u0437\u043b\u043e\u043d\u0430\u043c\u0435\u0440\u0435\u043d\u043d\u044b\u0435 \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0442\u043e\u0440\u044b.</li> <li>\u041f\u043e\u0442\u0435\u0440\u044f \u0443\u0437\u043b\u0430\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u0430.</li> <li>\u041f\u043e\u0432\u0442\u043e\u0440\u044b/\u0441\u043f\u0430\u043c/\u043f\u0435\u0440\u0435\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439.</li> </ul>"},{"location":"ru/security/#_3","title":"\u041c\u0435\u0440\u044b","text":"<ul> <li>E2EE: \u0441\u0435\u0440\u0432\u0435\u0440\u044b \u0432\u0438\u0434\u044f\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0430\u0434\u0434\u0438\u043d\u0433\u043e\u0432\u044b\u0439 \u043a\u043e\u043d\u0432\u0435\u0440\u0442 (AEAD).</li> <li>Sealed sender (\u043f\u043b\u0430\u043d): \u0441\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044f \u043e\u0442 \u0440\u0435\u043b\u0435\u0435\u0432.</li> <li>\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 ACK (Ed25519): \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043c\u043e\u0436\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446 inbox.</li> <li>\u0418\u0434\u0435\u043c\u043f\u043e\u0442\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c \u043f\u043e <code>message_id</code> (UUIDv7/ULID).</li> <li>PoW/\u043a\u0432\u043e\u0442\u044b/\u0431\u0430\u043d \u043f\u043e \u043a\u043b\u044e\u0447\u0443 \u043d\u0430 <code>PUT</code>.</li> <li>\u041b\u043e\u0433\u0438 \u0431\u0435\u0437 payload/PII; \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u044d\u043a\u0430\u043f\u043e\u0432 \u0411\u0414.</li> </ul>"},{"location":"ru/storage/","title":"\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 (PostgreSQL)","text":""},{"location":"ru/storage/#messages","title":"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 <code>messages</code>","text":"<pre><code>CREATE TABLE IF NOT EXISTS messages (\n  id           UUID PRIMARY KEY,\n  to_user      TEXT        NOT NULL,\n  header       BYTEA,\n  nonce        BYTEA       NOT NULL,\n  cipher       BYTEA       NOT NULL,\n  created_at   TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n  delivered_at TIMESTAMPTZ,\n  expires_at   TIMESTAMPTZ\n);\nCREATE INDEX IF NOT EXISTS idx_inbox_pending\n  ON messages (to_user, created_at) WHERE delivered_at IS NULL;\nCREATE INDEX IF NOT EXISTS idx_expiry ON messages (expires_at);\n</code></pre> <ul> <li>\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0443\u0434\u0430\u043b\u044f\u044e\u0442\u0441\u044f \u0441\u043f\u0443\u0441\u0442\u044f <code>RETAIN_DELIVERED_MINUTES</code>.</li> <li>\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u2014 \u043f\u043e <code>RETAIN_UNDELIVERED_DAYS</code>.</li> <li>\u0423\u0437\u043b\u044b\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0440\u0435\u043f\u043b\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e <code>NODE_PEERS</code> (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e).</li> </ul>"},{"location":"ru/adr/0001-project-rename-and-goals/","title":"ADR-0001: \u041f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0438 \u0446\u0435\u043b\u0438","text":"<p>\u0414\u0430\u0442\u0430: 2025-08-14 \u0421\u0442\u0430\u0442\u0443\u0441: \u041f\u0440\u0438\u043d\u044f\u0442\u043e</p>"},{"location":"ru/adr/0001-project-rename-and-goals/#_1","title":"\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442","text":"<p>\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u0438\u043c\u044f AntiPidorandel \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u043e \u043d\u0430 Spirit. \u0423\u0442\u043e\u0447\u043d\u0435\u043d\u044b \u0446\u0435\u043b\u0438: P2P/store-and-forward, \u043b\u0443\u043a\u043e\u0432\u0430\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u044f, \u0436\u0438\u0432\u0443\u0447\u0435\u0441\u0442\u044c \u0431\u0435\u0437 VPN.</p>"},{"location":"ru/adr/0001-project-rename-and-goals/#_2","title":"\u0420\u0435\u0448\u0435\u043d\u0438\u0435","text":"<ul> <li>\u0420\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439 \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u0432\u0435\u0434\u0443\u0442\u0441\u044f \u043f\u043e\u0434 \u0438\u043c\u0435\u043d\u0435\u043c Spirit.</li> <li>\u0424\u043e\u043a\u0443\u0441 \u043d\u0430 \u043c\u0438\u043d\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u0435\u0442\u0430\u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438 \u043a \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430\u043c.</li> </ul>"},{"location":"ru/adr/0001-project-rename-and-goals/#_3","title":"\u041f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f","text":"<ul> <li>\u0415\u0434\u0438\u043d\u044b\u0439 \u0431\u0440\u0435\u043d\u0434/\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435; roadmap \u0438 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b.</li> </ul>"},{"location":"ru/adr/0002-choose-go-postgres/","title":"ADR-0002: \u0412\u044b\u0431\u043e\u0440 Go + PostgreSQL","text":"<p>\u0414\u0430\u0442\u0430: 2025-08-14 \u0421\u0442\u0430\u0442\u0443\u0441: \u041f\u0440\u0438\u043d\u044f\u0442\u043e</p>"},{"location":"ru/adr/0002-choose-go-postgres/#_1","title":"\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442","text":"<p>\u041d\u0443\u0436\u0435\u043d \u0431\u044b\u0441\u0442\u0440\u044b\u0439 \u0438 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0432 \u0434\u0435\u043f\u043b\u043e\u0435 \u0441\u0442\u0435\u043a \u0441 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044f\u043c\u0438.</p>"},{"location":"ru/adr/0002-choose-go-postgres/#_2","title":"\u0420\u0435\u0448\u0435\u043d\u0438\u0435","text":"<ul> <li>Backend: Go 1.23+ (<code>gorilla/websocket</code>, <code>pgx</code>).</li> <li>\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435: PostgreSQL 16+ (\u0438\u043d\u0434\u0435\u043a\u0441\u044b, \u043d\u0430\u0434\u0451\u0436\u043d\u043e\u0441\u0442\u044c, \u043f\u0440\u043e\u0441\u0442\u044b\u0435 TTL-\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0438).</li> </ul>"},{"location":"ru/adr/0002-choose-go-postgres/#_3","title":"\u0410\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u044b","text":"<ul> <li>Rust/Node \u2014 \u043e\u0442\u043b\u043e\u0436\u0435\u043d\u044b \u0434\u043e \u043f\u043e\u0441\u0442\u2011MVP \u0440\u0430\u0434\u0438 time\u2011to\u2011market.</li> </ul>"},{"location":"ru/adr/0002-choose-go-postgres/#_4","title":"\u041f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f","text":"<ul> <li>\u0412\u044b\u0441\u043e\u043a\u0430\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0438 \u043f\u0440\u043e\u0441\u0442\u043e\u0442\u0430 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438.</li> </ul>"},{"location":"ru/adr/0003-ws-frame-contract/","title":"ADR-0003: \u041a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u043a\u0430\u0434\u0440\u043e\u0432 WebSocket","text":"<p>\u0414\u0430\u0442\u0430: 2025-08-14 \u0421\u0442\u0430\u0442\u0443\u0441: \u041f\u0440\u0438\u043d\u044f\u0442\u043e</p>"},{"location":"ru/adr/0003-ws-frame-contract/#_1","title":"\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442","text":"<p>\u041d\u0443\u0436\u0435\u043d \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0438 \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u044b\u0439 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0438 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f.</p>"},{"location":"ru/adr/0003-ws-frame-contract/#_2","title":"\u0420\u0435\u0448\u0435\u043d\u0438\u0435","text":"<ul> <li>\u0422\u0438\u043f\u044b: <code>send</code>, <code>deliver</code>, <code>ack</code>, <code>ping</code>, <code>pong</code>.</li> <li>\u0411\u0438\u043d\u0430\u0440\u043d\u044b\u0435 \u043f\u043e\u043b\u044f \u2014 base64.</li> <li>\u0418\u0434\u0435\u043c\u043f\u043e\u0442\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c \u043f\u043e <code>message_id</code>.</li> <li>\u041e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e \u2014 <code>ack_pubkey_b64</code> \u0438 <code>ack_sig_b64</code> (Ed25519).</li> </ul>"},{"location":"ru/adr/0003-ws-frame-contract/#_3","title":"\u041f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f","text":"<ul> <li>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u0438 ACK.</li> </ul>"},{"location":"ru/adr/0004-mailbox-node-api/","title":"ADR-0004: Mailbox Node API","text":"<p>\u0414\u0430\u0442\u0430: 2025-08-14 \u0421\u0442\u0430\u0442\u0443\u0441: \u041f\u0440\u0438\u043d\u044f\u0442\u043e</p>"},{"location":"ru/adr/0004-mailbox-node-api/#_1","title":"\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442","text":"<p>\u041d\u0443\u0436\u0435\u043d \u0441\u043b\u043e\u0439 store-and-forward \u0431\u0435\u0437 \u0435\u0434\u0438\u043d\u043e\u0439 \u0442\u043e\u0447\u043a\u0438 \u043e\u0442\u043a\u0430\u0437\u0430.</p>"},{"location":"ru/adr/0004-mailbox-node-api/#_2","title":"\u0420\u0435\u0448\u0435\u043d\u0438\u0435","text":"<ul> <li>HTTP API <code>/node/put</code>, <code>/node/get</code>, <code>/node/ack</code>.</li> <li>\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 ACK (Ed25519) \u043f\u043e \u0441\u0442\u0440\u043e\u043a\u0435 <code>ack:&lt;uuid&gt;</code> (\u043e\u043f\u0446.).</li> <li>\u0420\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u043d\u0430 <code>NODE_PEERS</code> (best-effort).</li> </ul>"},{"location":"ru/adr/0004-mailbox-node-api/#_3","title":"\u041f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f","text":"<ul> <li>\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0434\u0430\u0436\u0435 \u043f\u0440\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0435\u043d\u0430.</li> </ul>"},{"location":"ru/adr/0005-censorship-resilience/","title":"ADR-0005: \u0426\u0435\u043d\u0437\u0443\u0440\u043e\u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c","text":"<p>\u0414\u0430\u0442\u0430: 2025-08-14 \u0421\u0442\u0430\u0442\u0443\u0441: \u041f\u0440\u0438\u043d\u044f\u0442\u043e</p>"},{"location":"ru/adr/0005-censorship-resilience/#_1","title":"\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442","text":"<p>\u041d\u0443\u0436\u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0430 \u0432 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0441\u0435\u0442\u0435\u0432\u044b\u0445 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043e\u043a \u0431\u0435\u0437 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e VPN.</p>"},{"location":"ru/adr/0005-censorship-resilience/#_2","title":"\u0420\u0435\u0448\u0435\u043d\u0438\u0435","text":"<ul> <li>\u041b\u0435\u0441\u0442\u043d\u0438\u0446\u0430 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043e\u0432: H3 \u2192 H2/WS \u2192 SSE/long-poll \u2192 TURN/WebRTC.</li> <li>\u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u043e\u043c\u0435\u043d\u043e\u0432/ASN; \u0441\u0442\u0430\u0438 \u0443\u0437\u043b\u043e\u0432\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u043e\u0432.</li> <li>\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0431\u0443\u0442\u0441\u0442\u0440\u0430\u043f\u2011\u043c\u0430\u043d\u0438\u0444\u0435\u0441\u0442 \u0438\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u043e\u0432.</li> </ul>"},{"location":"ru/adr/0005-censorship-resilience/#_3","title":"\u041f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f","text":"<ul> <li>\u041f\u043e\u0432\u044b\u0448\u0435\u043d\u043d\u0430\u044f \u0436\u0438\u0432\u0443\u0447\u0435\u0441\u0442\u044c; \u0441\u043b\u043e\u0436\u043d\u0435\u0435 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u044f (\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u043e\u0432).</li> </ul>"},{"location":"ru/adr/discovery/","title":"\u041e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u0438\u0435 \u0438 \u0431\u0443\u0442\u0441\u0442\u0440\u0430\u043f","text":""},{"location":"ru/adr/discovery/#_2","title":"\u0411\u0443\u0442\u0441\u0442\u0440\u0430\u043f\u2011\u043c\u0430\u043d\u0438\u0444\u0435\u0441\u0442","text":"<ul> <li>\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0441\u043e \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0434\u043e\u043c\u0435\u043d\u043e\u0432, IP, \u043f\u043e\u0440\u0442\u043e\u0432 \u0438 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043e\u0432 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043e\u0432.</li> <li>\u0420\u0430\u0441\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u00ab\u0432\u0438\u0442\u0440\u0438\u043d\u00bb (GitHub Pages, \u0437\u0435\u0440\u043a\u0430\u043b\u0430, \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u0430\u0439\u0442).</li> <li>\u041a\u043b\u0438\u0435\u043d\u0442 \u043a\u044d\u0448\u0438\u0440\u0443\u0435\u0442 \u0438 \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442; \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u043f\u043e\u0434\u043f\u0438\u0441\u044c \u043a\u043b\u044e\u0447\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0430.</li> </ul>"},{"location":"ru/adr/discovery/#dht","title":"DHT (\u043f\u043e\u0437\u0436\u0435)","text":"<ul> <li>Kademlia: <code>hash(PubKey) -&gt; swarm \u0443\u0437\u043b\u043e\u0432</code>.</li> <li>\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0437\u0430\u043f\u0438\u0441\u0435\u0439: \u043f\u043e\u0434\u043f\u0438\u0441\u0438 + rate\u2011limit.</li> </ul>"},{"location":"ru/adr/discovery/#happyeyeballs","title":"Happy\u2011eyeballs \u0434\u043b\u044f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043e\u0432","text":"<ul> <li>\u041a\u043b\u0438\u0435\u043d\u0442 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0431\u0443\u0435\u0442 H3\u2192H2/WS\u2192SSE/long\u2011poll\u2192TURN/WebRTC \u0438 \u0432\u044b\u0431\u0438\u0440\u0430\u0435\u0442 \u043f\u0435\u0440\u0432\u044b\u0439 \u0443\u0441\u043f\u0435\u0448\u043d\u044b\u0439 \u043f\u0443\u0442\u044c.</li> </ul>"},{"location":"en/en/","title":"Spirit \u2014 Overview","text":"<p>Spirit \u2014 is a privacy-first messenger that uses client-to-client store-and-forward on top of a relay network. Messages are end-to-end encrypted and routed through multiple hops using onion-style layered encryption. The server can act as a blind relay and/or a mailbox node.</p> <ul> <li>\ud83e\udded Goals: P2P/store-and-forward, minimal metadata, resilience without a mandatory VPN.</li> <li>\ud83d\udd10 Principles: E2EE, sealed sender (planned), fixed-size padded envelopes, replay protection.</li> <li>\ud83e\uddf1 Censorship resistance: multiple transports and domains, a fallback ladder, mailbox swarms, and multi-source bootstrap.</li> </ul> <p>Rename: the project was previously called AntiPidorandel (working title). The current name isSpirit.</p>"},{"location":"en/en/censorship/","title":"Censorship resistance","text":""},{"location":"en/en/censorship/#layered-approach","title":"Layered Approach","text":"<ol> <li>Transports: H3 (QUIC) \u2192 H2/WS(443) \u2192 SSE/long\u2011poll \u2192 TURN/WebRTC DataChannel.</li> <li>Infrastructure: multiple domains/ASN/clouds; some traffic via repeaters.</li> <li>P2P storage: mailer node swarms allow offline message delivery without a central domain.</li> <li>Bootstrap: signed list of endpoints in several showcases (GitHub Pages, mirrors).</li> <li>Availability telemetry (no identifiers): prompts clients for the order of transports.</li> </ol>"},{"location":"en/en/censorship/#what-to-consider","title":"What to consider","text":"<ul> <li>TLS fingerprint: as \"browser-like\" as possible. Headers - no exotics.</li> <li>Padding and jitter: fixed envelope size, random delivery delays.</li> <li>It\u2019s better not to count on \u201cdomain fronting\u201d, since it is closed almost everywhere.</li> <li>UDP can be blocked - a reliable path via TCP/H2/443 is required.</li> </ul>"},{"location":"en/en/configuration/","title":"Configuration","text":""},{"location":"en/en/configuration/#environment-variables-server","title":"Environment variables (server)","text":"Variable Default Description <code>DATABASE_URL</code> \u2014 DSN Postgres (necessarily) <code>ADDR</code> <code>:8080</code> HTTP/WS address <code>PENDING_BATCH</code> <code>1000</code> How much pending is given at a time <code>RETAIN_DELIVERED_MINUTES</code> <code>60</code> TTL delivered <code>RETAIN_UNDELIVERED_DAYS</code> <code>14</code> TTL undelivered <code>ALLOWED_ORIGINS</code> empty Allowed Origins (comma separated) <code>JANITOR_INTERVAL_SECONDS</code> <code>60</code> Background cleaning period <code>READ_TIMEOUT_SECONDS</code> <code>60</code> WS read timeout <code>WRITE_TIMEOUT_SECONDS</code> <code>20</code> WS write timeout <code>HANDSHAKE_TIMEOUT_SECONDS</code> <code>5</code> HTTP read-header timeout <code>NODE_ENABLED</code> <code>false</code> Enable HTTP Mailbox Host <code>NODE_PEERS</code> empty Neighboring nodes (comma separated) for replication <code>REQUIRE_ACK_SIGNATURE</code> <code>false</code> Require ACK signature (Ed25519)"},{"location":"en/en/configuration/#example-envexample","title":"Example <code>.env.example</code>","text":"<pre><code>DATABASE_URL=postgres://anti:anti@db:5432/anti?sslmode=disable\nADDR=:8080\nPENDING_BATCH=1000\nRETAIN_DELIVERED_MINUTES=60\nRETAIN_UNDELIVERED_DAYS=14\nALLOWED_ORIGINS=\nJANITOR_INTERVAL_SECONDS=60\nREAD_TIMEOUT_SECONDS=60\nWRITE_TIMEOUT_SECONDS=20\nHANDSHAKE_TIMEOUT_SECONDS=5\nNODE_ENABLED=true\nNODE_PEERS=\nREQUIRE_ACK_SIGNATURE=true\n</code></pre>"},{"location":"en/en/discovery/","title":"Discovery and Bootstrap","text":""},{"location":"en/en/discovery/#bootstrap-manifesto","title":"Bootstrap Manifesto","text":"<ul> <li>A signed file with a list of domains, IPs, ports and transport priorities.</li> <li>Splits into several \"showcases\" (GitHub Pages, mirrors, main site).</li> <li>The client caches and periodically updates; verifies the signature with the project key.</li> </ul>"},{"location":"en/en/discovery/#dht-later","title":"DHT (later)","text":"<ul> <li>Kademlia: <code>hash(PubKey) -&gt; swarm \u0443\u0437\u043b\u043e\u0432</code>.</li> <li>Record validation: signatures + rate\u2011limit.</li> </ul>"},{"location":"en/en/discovery/#happyeyeballs-for-transports","title":"Happy\u2011eyeballs for transports","text":"<ul> <li>The client tries H3\u2192H2/WS\u2192SSE/long\u2011poll\u2192TURN/WebRTC in parallel and chooses the first successful path.</li> </ul>"},{"location":"en/en/node-mailbox/","title":"Mailbox Node","text":"<p>The Mailbox node stores encrypted incoming envelopes using the recipient's key and delivers them upon request.</p>"},{"location":"en/en/node-mailbox/#purpose-of-a-swarm","title":"Purpose of a swarm","text":"<ul> <li><code>swarm = k</code> nodes based on consistent hash <code>hash(PubKey)</code>.</li> <li>The sender places an envelope on all <code>k</code> nodes (or <code>m</code> of <code>n</code> in erasure coding).</li> <li>The receiver periodically <code>GET</code>s to its relay flock and removes envelopes via <code>ACK</code> (signed).</li> </ul>"},{"location":"en/en/node-mailbox/#http-api","title":"HTTP API","text":""},{"location":"en/en/node-mailbox/#post-nodeput","title":"<code>POST /node/put</code>","text":"<p>Puts down the envelope. <pre><code>{\n  \"to\": \"bob\",\n  \"message_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"header_b64\": \"...\",\n  \"nonce_b64\": \"...\",\n  \"cipher_b64\": \"...\",\n  \"ttl_seconds\": 1209600\n}\n</code></pre></p>"},{"location":"en/en/node-mailbox/#get-nodegettouser","title":"<code>GET /node/get?to=&lt;user&gt;</code>","text":"<p>Returns a list of envelopes (up to <code>PENDING_BATCH</code>).</p>"},{"location":"en/en/node-mailbox/#post-nodeack","title":"<code>POST /node/ack</code>","text":"<p>Deletes by <code>message_id</code>. Recommended to sign: <pre><code>{\n  \"message_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"pubkey_b64\": \"&lt;ed25519-pub&gt;\",\n  \"sig_b64\": \"&lt;ed25519-sign('ack:'+message_id)&gt;\"\n}\n</code></pre></p>"},{"location":"en/en/node-mailbox/#replication-and-neighbor-nodes","title":"Replication and neighbor nodes","text":"<ul> <li>After <code>put</code>, the node can replicate to <code>NODE_PEERS</code> (best\u2011effort).</li> <li>ACK removal occurs on all replicas.</li> </ul>"},{"location":"en/en/operations/","title":"Operations","text":"<ul> <li><code>/healthz</code> \u2014 alive/ready (200 ok).</li> <li>\u041b\u043e\u0433\u0438 \u2014 stdout/stderr (Docker best practice).</li> <li>Image - distroless:nonroot.</li> <li>Monitoring (plan): Prometheus metrics.</li> </ul>"},{"location":"en/en/operations/#deploying-a-flock-of-repeaters","title":"Deploying a \"flock\" of repeaters","text":"<ul> <li>Set up 3-5 mail nodes in different clouds/ASN.</li> <li>Enable <code>NODE_ENABLED=true</code> and configure <code>NODE_PEERS</code> for replication.</li> <li>Set up backup domains/certificates.</li> </ul>"},{"location":"en/en/operations/#backups","title":"Backups","text":"<ul> <li>Scheduled DB dump; encrypted storage.</li> </ul>"},{"location":"en/en/protocol/","title":"Protocol","text":""},{"location":"en/en/protocol/#websocket-frames-mvp","title":"WebSocket frames (MVP)","text":"<pre><code>// client -&gt; server\n{ \"type\":\"send\", \"to\":\"&lt;user&gt;\", \"message_id\":\"&lt;uuid&gt;\", \"header_b64\":\"...\", \"nonce_b64\":\"...\", \"cipher_b64\":\"...\" }\n{ \"type\":\"ack\",  \"message_id\":\"&lt;uuid&gt;\", \"ack_pubkey_b64\":\"...\", \"ack_sig_b64\":\"...\" }\n{ \"type\":\"ping\" }\n\n// server -&gt; client\n{ \"type\":\"deliver\", \"to\":\"&lt;user&gt;\", \"message_id\":\"&lt;uuid&gt;\", \"header_b64\":\"...\", \"nonce_b64\":\"...\", \"cipher_b64\":\"...\" }\n{ \"type\":\"pong\" }\n</code></pre> <p><code>ack_pubkey_b64/ack_sig_b64</code> are optional fields. If <code>REQUIRE_ACK_SIGNATURE=true</code> is enabled, the server checks <code>Ed25519.Verify(pub, \"ack:\"+uuid, sig)</code>.</p>"},{"location":"en/en/protocol/#http-mailbox","title":"HTTP Mailbox","text":"<p>Endpoints: <code>/node/put</code>, <code>/node/get</code>, <code>/node/ack</code>. See the Mailer Nodes section for details.</p>"},{"location":"en/en/quickstart/","title":"Quick start","text":""},{"location":"en/en/quickstart/#requirements","title":"Requirements","text":"<ul> <li>Docker Desktop / Docker Engine</li> <li>Ports <code>8080</code> \u0438 <code>5432</code> are free</li> </ul>"},{"location":"en/en/quickstart/#run-locally-docker-compose","title":"Run locally (docker-compose)","text":"<pre><code>docker compose up -d --build\ndocker compose logs -f server\ncurl http://localhost:8080/healthz   # -&gt; ok\n</code></pre>"},{"location":"en/en/quickstart/#manual-server-start","title":"Manual server start","text":"<pre><code>export DATABASE_URL=\"postgres://anti:anti@localhost:5432/anti?sslmode=disable\"\ncd server\ngo run ./cmd/server\n</code></pre>"},{"location":"en/en/quickstart/#enabling-the-mailer-node-http-api","title":"Enabling the Mailer Node (HTTP API)","text":"<p>In environment variables: <pre><code>NODE_ENABLED=true\nREQUIRE_ACK_SIGNATURE=true   # optional (recommended)\n</code></pre> Endpoints will appear under <code>/node/*</code>. See \"Node Mailbox\".</p>"},{"location":"en/en/roadmap/","title":"Roadmap","text":"<ul> <li>[ ] X3DH + Double Ratchet (Signal-like ratchet)</li> <li>[ ] Sealed sender</li> <li>[ ] Replication of mailer nodes (k of n, erasure coding)</li> <li>[ ] DHT (Kademlia) for discovery</li> <li>[ ] Observability: Prometheus, /readyz, /livez</li> <li>[ ] Alternative transports: gRPC streams, WebRTC DC</li> <li>[ ] Clients: Desktop (Tauri), Mobile (Flutter)</li> </ul>"},{"location":"en/en/routing-onion/","title":"P2P and Onion Routing","text":""},{"location":"en/en/routing-onion/#idea","title":"Idea","text":"<p>A message is encrypted in layers (\"onion\") for a chain of hops: each hop knows only the next one. Nodes act as relays and/or temporary store-and-forward holders.</p>"},{"location":"en/en/routing-onion/#layers","title":"Layers","text":"<ul> <li>Outer layer: address of the next hop (public key), MAC, TTL.</li> <li>Inner layers: repeated for each hop.</li> <li>The innermost layer is an encrypted envelope for the recipient (AEAD).</li> </ul>"},{"location":"en/en/routing-onion/#route-selection","title":"Route Selection","text":"<ul> <li>3 hops by default (configurable).</li> <li>Selected from a pool of nodes: randomly, considering ASN/provider diversity.</li> <li>For offline delivery, the last hop is one of the recipient's flock mailbox nodes.</li> </ul> <pre><code>flowchart LR\n    A[Sender] --&gt; H1[Hop 1]\n    H1 --&gt; H2[Hop 2]\n    H2 --&gt; H3[Hop 3 / Mailbox]\n    H3 --&gt; B[Recipient]\n</code></pre>"},{"location":"en/en/security/","title":"Security","text":""},{"location":"en/en/security/#possible-threats","title":"Possible Threats","text":"<ul> <li>Passive network observer (DPI, ISP).</li> <li>Partially malicious relays.</li> <li>Loss of mailbox node.</li> <li>Replays/spam/queue overflow.</li> </ul>"},{"location":"en/en/security/#measures","title":"Measures","text":"<ul> <li>E2EE: servers see only the padded envelope (AEAD).</li> <li>Sealed sender (planned): hide the sender from relays.</li> <li>Signed ACK (Ed25519): only the inbox owner can delete.</li> <li>Idempotency by <code>message_id</code> (UUIDv7/ULID).</li> <li>PoW/quotas/ban by key on <code>PUT</code>.</li> <li>Logs without payload/PII; encrypted DB backups.</li> </ul>"},{"location":"en/en/storage/","title":"Storage (PostgreSQL)","text":""},{"location":"en/en/storage/#table-messages","title":"Table <code>messages</code>","text":"<pre><code>CREATE TABLE IF NOT EXISTS messages (\n    id           UUID PRIMARY KEY,\n    to_user      TEXT        NOT NULL,\n    header       BYTEA,\n    nonce        BYTEA       NOT NULL,\n    cipher       BYTEA       NOT NULL,\n    created_at   TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    delivered_at TIMESTAMPTZ,\n    expires_at   TIMESTAMPTZ\n);\nCREATE INDEX IF NOT EXISTS idx_inbox_pending\n    ON messages (to_user, created_at) WHERE delivered_at IS NULL;\nCREATE INDEX IF NOT EXISTS idx_expiry ON messages (expires_at);\n</code></pre> <ul> <li>Delivered messages are deleted after <code>RETAIN_DELIVERED_MINUTES</code>.</li> <li>Undelivered messages \u2014 after <code>RETAIN_UNDELIVERED_DAYS</code>.</li> <li>Mailbox nodes can replicate via <code>NODE_PEERS</code> (optional).</li> </ul>"},{"location":"en/en/adr/0001-project-rename-and-goals/","title":"ADR-0001: Project Rename and Goals","text":"<p>Date: 2025-08-14 Status: Accepted</p>"},{"location":"en/en/adr/0001-project-rename-and-goals/#context","title":"Context","text":"<p>The working name AntiPidorandel has been changed to Spirit. The goals have been clarified: P2P/store-and-forward, onion routing, resilience without VPN.</p>"},{"location":"en/en/adr/0001-project-rename-and-goals/#decision","title":"Decision","text":"<ul> <li>The repository and documentation are maintained under the name Spirit.</li> <li>Focus on minimizing metadata and resistance to blocking.</li> </ul>"},{"location":"en/en/adr/0001-project-rename-and-goals/#consequences","title":"Consequences","text":"<ul> <li>Unified brand/name; roadmap and architecture updated.</li> </ul>"},{"location":"en/en/adr/0002-choose-go-postgres/","title":"ADR-0002: Choosing Go + PostgreSQL","text":"<p>Date: 2025-08-14 Status: Accepted</p>"},{"location":"en/en/adr/0002-choose-go-postgres/#context","title":"Context","text":"<p>A fast and easy-to-deploy stack with minimal dependencies is needed.</p>"},{"location":"en/en/adr/0002-choose-go-postgres/#decision","title":"Decision","text":"<ul> <li>Backend: Go 1.23+ (<code>gorilla/websocket</code>, <code>pgx</code>).</li> <li>Storage: PostgreSQL 16+ (indexes, reliability, simple TTL policies).</li> </ul>"},{"location":"en/en/adr/0002-choose-go-postgres/#alternatives","title":"Alternatives","text":"<ul> <li>Rust/Node \u2014 postponed until post-MVP for time-to-market reasons.</li> </ul>"},{"location":"en/en/adr/0002-choose-go-postgres/#consequences","title":"Consequences","text":"<ul> <li>High performance and ease of operation.</li> </ul>"},{"location":"en/en/adr/0003-ws-frame-contract/","title":"ADR-0003: WebSocket Frame Contract","text":"<p>Date: 2025-08-14 Status: Accepted</p>"},{"location":"en/en/adr/0003-ws-frame-contract/#context","title":"Context","text":"<p>A simple and compatible delivery and acknowledgment contract is needed.</p>"},{"location":"en/en/adr/0003-ws-frame-contract/#decision","title":"Decision","text":"<ul> <li>Types: <code>send</code>, <code>deliver</code>, <code>ack</code>, <code>ping</code>, <code>pong</code>.</li> <li>Binary fields \u2014 base64.</li> <li>Idempotency by <code>message_id</code>.</li> <li>Optionally \u2014 <code>ack_pubkey_b64</code> and <code>ack_sig_b64</code> (Ed25519).</li> </ul>"},{"location":"en/en/adr/0003-ws-frame-contract/#consequences","title":"Consequences","text":"<ul> <li>Minimal client changes when adding ACK signature support.</li> </ul>"},{"location":"en/en/adr/0004-mailbox-node-api/","title":"ADR-0004: Mailbox Node API","text":"<p>Date: 2025-08-14 Status: Accepted</p>"},{"location":"en/en/adr/0004-mailbox-node-api/#context","title":"Context","text":"<p>A store-and-forward layer without a single point of failure is needed.</p>"},{"location":"en/en/adr/0004-mailbox-node-api/#decision","title":"Decision","text":"<ul> <li>HTTP API <code>/node/put</code>, <code>/node/get</code>, <code>/node/ack</code>.</li> <li>Signed ACK (Ed25519) for the string <code>ack:&lt;uuid&gt;</code> (optional).</li> <li>Replication to <code>NODE_PEERS</code> (best-effort).</li> </ul>"},{"location":"en/en/adr/0004-mailbox-node-api/#consequences","title":"Consequences","text":"<ul> <li>Delivery works even if the main domain is unavailable.</li> </ul>"},{"location":"en/en/adr/0005-censorship-resilience/","title":"ADR-0005: Censorship Resilience","text":"<p>Date: 2025-08-14 Status: Accepted</p>"},{"location":"en/en/adr/0005-censorship-resilience/#context","title":"Context","text":"<p>Operation is needed under network blocking conditions without mandatory VPN.</p>"},{"location":"en/en/adr/0005-censorship-resilience/#decision","title":"Decision","text":"<ul> <li>Transport ladder: H3 \u2192 H2/WS \u2192 SSE/long-poll \u2192 TURN/WebRTC.</li> <li>Multiple domains/ASNs; flocks of mailbox nodes.</li> <li>Signed bootstrap manifest from multiple sources.</li> </ul>"},{"location":"en/en/adr/0005-censorship-resilience/#consequences","title":"Consequences","text":"<ul> <li>Increased resilience; more complex operation (multiple providers).</li> </ul>"},{"location":"en/ru/","title":"Spirit \u2014 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f","text":"<p>Spirit \u2014 \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u044b\u0439 \u043c\u0435\u0441\u0441\u0435\u043d\u0434\u0436\u0435\u0440 \u0441 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435\u043c \u00ab\u043e\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043a \u043a\u043b\u0438\u0435\u043d\u0442\u0443\u00bb (store-and-forward) \u043f\u043e\u0432\u0435\u0440\u0445 \u0441\u0435\u0442\u0438 \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0442\u043e\u0440\u043e\u0432. \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0448\u0438\u0444\u0440\u0443\u044e\u0442\u0441\u044f end\u2011to\u2011end \u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u0441\u043b\u043e\u044f\u043c\u0438 (\u043b\u0443\u043a\u043e\u0432\u0430\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u044f) \u0447\u0435\u0440\u0435\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e hop\u2019\u043e\u0432. \u0421\u0435\u0440\u0432\u0435\u0440 \u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043a\u0430\u043a \u00ab\u0441\u043b\u0435\u043f\u043e\u0439\u00bb \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0442\u043e\u0440 \u0438/\u0438\u043b\u0438 \u043a\u0430\u043a \u0443\u0437\u0435\u043b\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a.</p> <ul> <li>\ud83e\udded \u0426\u0435\u043b\u0438: P2P/store\u2011and\u2011forward, \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0442\u0430\u0434\u0430\u043d\u043d\u044b\u0435, \u0436\u0438\u0432\u0443\u0447\u0435\u0441\u0442\u044c \u0431\u0435\u0437 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e VPN.</li> <li>\ud83d\udd10 \u041f\u0440\u0438\u043d\u0446\u0438\u043f\u044b: E2EE, (\u043f\u043b\u0430\u043d) sealed sender, \u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u043e\u0432 (\u043f\u0430\u0434\u0434\u0438\u043d\u0433), \u0437\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u043f\u043e\u0432\u0442\u043e\u0440\u043e\u0432.</li> <li>\ud83e\uddf1 \u0423\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c \u043a \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430\u043c: \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u044b \u0438 \u0434\u043e\u043c\u0435\u043d\u044b, fallback\u2011\u043b\u0435\u0441\u0442\u043d\u0438\u0446\u0430, \u0441\u0442\u0430\u0438 \u0445\u0440\u0430\u043d\u0438\u0442\u0435\u043b\u0435\u0439, \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0430\u043d\u0430\u043b\u043e\u0432 \u0431\u0443\u0442\u0441\u0442\u0440\u0430\u043f\u0430.</li> </ul> <p>\u041f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435: \u043f\u0440\u043e\u0435\u043a\u0442 \u0440\u0430\u043d\u0435\u0435 \u043d\u0430\u0437\u044b\u0432\u0430\u043b\u0441\u044f AntiPidorandel(\u0427\u0435\u0440\u043d\u043e\u0432\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435). \u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0438\u043c\u044f \u2014 Spirit.</p>"},{"location":"en/ru/censorship/","title":"\u0426\u0435\u043d\u0437\u0443\u0440\u043e\u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c","text":""},{"location":"en/ru/censorship/#_2","title":"\u041c\u043d\u043e\u0433\u043e\u0441\u043b\u043e\u0439\u043d\u044b\u0439 \u043f\u043e\u0434\u0445\u043e\u0434","text":"<ol> <li>\u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u044b: H3 (QUIC) \u2192 H2/WS(443) \u2192 SSE/long\u2011poll \u2192 TURN/WebRTC DataChannel.</li> <li>\u0418\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430: \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u043e\u043c\u0435\u043d\u043e\u0432/ASN/\u043e\u0431\u043b\u0430\u043a\u043e\u0432; \u0447\u0430\u0441\u0442\u044c \u0442\u0440\u0430\u0444\u0438\u043a\u0430 \u0447\u0435\u0440\u0435\u0437 \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0442\u043e\u0440\u044b.</li> <li>P2P \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435: \u0441\u0442\u0430\u0438 \u0443\u0437\u043b\u043e\u0432\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u043e\u0432 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u043e\u0444\u043b\u0430\u0439\u043d\u2011\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0431\u0435\u0437 \u0446\u0435\u043d\u0442\u0440\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0435\u043d\u0430.</li> <li>\u0411\u0443\u0442\u0441\u0442\u0440\u0430\u043f: \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u044d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u043e\u0432 \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0432\u0438\u0442\u0440\u0438\u043d\u0430\u0445 (GitHub Pages, \u0437\u0435\u0440\u043a\u0430\u043b\u0430).</li> <li>\u0422\u0435\u043b\u0435\u043c\u0435\u0442\u0440\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 (\u0431\u0435\u0437 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u0432): \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u043c \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043e\u0432.</li> </ol>"},{"location":"en/ru/censorship/#_3","title":"\u0427\u0442\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c","text":"<ul> <li>\u041e\u0442\u043f\u0435\u0447\u0430\u0442\u043e\u043a TLS: \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u00ab\u043f\u043e\u0445\u043e\u0436 \u043d\u0430 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u00bb. \u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u2014 \u0431\u0435\u0437 \u044d\u043a\u0437\u043e\u0442\u0438\u043a\u0438.</li> <li>\u041f\u0430\u0434\u0434\u0438\u043d\u0433 \u0438 \u0434\u0436\u0438\u0442\u0442\u0435\u0440: \u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u043e\u0432, \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0435 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0438 \u0432\u044b\u0434\u0430\u0447\u0438.</li> <li>\u041b\u0443\u0447\u0448\u0435 \u043d\u0435 \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043d\u0430 \u00abdomain fronting\u00bb, \u0442.\u043a. \u043e\u043d \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u0435\u0437\u0434\u0435 \u0437\u0430\u043a\u0440\u044b\u0442.</li> <li>UDP \u043c\u043e\u0436\u0435\u0442 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u2014 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d \u043d\u0430\u0434\u0451\u0436\u043d\u044b\u0439 \u043f\u0443\u0442\u044c \u043f\u043e TCP/H2/443.</li> </ul>"},{"location":"en/ru/configuration/","title":"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f","text":""},{"location":"en/ru/configuration/#_2","title":"\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f (\u0441\u0435\u0440\u0432\u0435\u0440)","text":"\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 <code>DATABASE_URL</code> \u2014 DSN Postgres (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e) <code>ADDR</code> <code>:8080</code> \u0410\u0434\u0440\u0435\u0441 HTTP/WS <code>PENDING_BATCH</code> <code>1000</code> \u0421\u043a\u043e\u043b\u044c\u043a\u043e pending \u043e\u0442\u0434\u0430\u0451\u0442\u0441\u044f \u0437\u0430 \u0440\u0430\u0437 <code>RETAIN_DELIVERED_MINUTES</code> <code>60</code> TTL \u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445 <code>RETAIN_UNDELIVERED_DAYS</code> <code>14</code> TTL \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445 <code>ALLOWED_ORIGINS</code> \u043f\u0443\u0441\u0442\u043e \u0420\u0430\u0437\u0440\u0435\u0448\u0451\u043d\u043d\u044b\u0435 Origin (\u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e) <code>JANITOR_INTERVAL_SECONDS</code> <code>60</code> \u041f\u0435\u0440\u0438\u043e\u0434 \u0444\u043e\u043d\u043e\u0432\u043e\u0439 \u043e\u0447\u0438\u0441\u0442\u043a\u0438 <code>READ_TIMEOUT_SECONDS</code> <code>60</code> WS read timeout <code>WRITE_TIMEOUT_SECONDS</code> <code>20</code> WS write timeout <code>HANDSHAKE_TIMEOUT_SECONDS</code> <code>5</code> HTTP read-header timeout <code>NODE_ENABLED</code> <code>false</code> \u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c HTTP-\u0443\u0437\u0435\u043b \u043f\u043e\u0447\u0442\u043e\u0432\u043e\u0433\u043e \u044f\u0449\u0438\u043a\u0430 <code>NODE_PEERS</code> \u043f\u0443\u0441\u0442\u043e \u0421\u043e\u0441\u0435\u0434\u043d\u0438\u0435 \u0443\u0437\u043b\u044b (\u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e) \u0434\u043b\u044f \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u0438 <code>REQUIRE_ACK_SIGNATURE</code> <code>false</code> \u0422\u0440\u0435\u0431\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u044c ACK (Ed25519)"},{"location":"en/ru/configuration/#envexample","title":"\u041f\u0440\u0438\u043c\u0435\u0440 <code>.env.example</code>","text":"<pre><code>DATABASE_URL=postgres://anti:anti@db:5432/anti?sslmode=disable\nADDR=:8080\nPENDING_BATCH=1000\nRETAIN_DELIVERED_MINUTES=60\nRETAIN_UNDELIVERED_DAYS=14\nALLOWED_ORIGINS=\nJANITOR_INTERVAL_SECONDS=60\nREAD_TIMEOUT_SECONDS=60\nWRITE_TIMEOUT_SECONDS=20\nHANDSHAKE_TIMEOUT_SECONDS=5\nNODE_ENABLED=true\nNODE_PEERS=\nREQUIRE_ACK_SIGNATURE=true\n</code></pre>"},{"location":"en/ru/node-mailbox/","title":"\u0423\u0437\u043b\u044b\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u0438 (Mailbox Node)","text":"<p>\u0423\u0437\u0435\u043b\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a \u0445\u0440\u0430\u043d\u0438\u0442 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u044b \u00ab\u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445\u00bb \u043f\u043e \u043a\u043b\u044e\u0447\u0443 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f \u0438 \u043e\u0442\u0434\u0430\u0451\u0442 \u0438\u0445 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443.</p>"},{"location":"en/ru/node-mailbox/#swarm","title":"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0438 \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0442\u043e\u0440\u043e\u0432 (swarm)","text":"<ul> <li><code>swarm = k</code> \u0443\u0437\u043b\u043e\u0432 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043a\u043e\u043d\u0441\u0438\u0441\u0442\u0435\u043d\u0442\u043d\u043e\u0433\u043e \u0445\u0435\u0448\u0430 <code>hash(PubKey)</code>.</li> <li>\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c \u043a\u043b\u0430\u0434\u0451\u0442 \u043a\u043e\u043d\u0432\u0435\u0440\u0442 \u043d\u0430 \u0432\u0441\u0435 <code>k</code> \u0443\u0437\u043b\u043e\u0432 (\u0438\u043b\u0438 <code>m</code> \u0438\u0437 <code>n</code> \u043f\u0440\u0438 \u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0441\u0442\u0438\u0440\u0430\u043d\u0438\u044f).</li> <li>\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044c \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 <code>GET</code> \u043a \u0441\u0432\u043e\u0435\u0439 \u0441\u0442\u0430\u0435 \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0442\u043e\u0440\u043e\u0432 \u0438 \u0443\u0434\u0430\u043b\u044f\u0435\u0442 \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u044b \u0447\u0435\u0440\u0435\u0437 <code>ACK</code> (\u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439).</li> </ul>"},{"location":"en/ru/node-mailbox/#http-api","title":"HTTP API","text":""},{"location":"en/ru/node-mailbox/#post-nodeput","title":"<code>POST /node/put</code>","text":"<p>\u041a\u043b\u0430\u0434\u0451\u0442 \u043a\u043e\u043d\u0432\u0435\u0440\u0442. <pre><code>{\n  \"to\": \"bob\",\n  \"message_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"header_b64\": \"...\",\n  \"nonce_b64\": \"...\",\n  \"cipher_b64\": \"...\",\n  \"ttl_seconds\": 1209600\n}\n</code></pre></p>"},{"location":"en/ru/node-mailbox/#get-nodegettouser","title":"<code>GET /node/get?to=&lt;user&gt;</code>","text":"<p>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u043e\u0432 (\u0434\u043e <code>PENDING_BATCH</code>).</p>"},{"location":"en/ru/node-mailbox/#post-nodeack","title":"<code>POST /node/ack</code>","text":"<p>\u0423\u0434\u0430\u043b\u044f\u0435\u0442 \u043f\u043e <code>message_id</code>. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c: <pre><code>{\n  \"message_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"pubkey_b64\": \"&lt;ed25519-pub&gt;\",\n  \"sig_b64\": \"&lt;ed25519-sign('ack:'+message_id)&gt;\"\n}\n</code></pre></p>"},{"location":"en/ru/node-mailbox/#_1","title":"\u0420\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u0438 \u0441\u043e\u0441\u0435\u0434\u043d\u0438\u0435 \u0443\u0437\u043b\u044b","text":"<ul> <li>\u041f\u043e\u0441\u043b\u0435 <code>put</code> \u0443\u0437\u0435\u043b \u043c\u043e\u0436\u0435\u0442 \u0440\u0435\u043f\u043b\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430 <code>NODE_PEERS</code> (best\u2011effort).</li> <li>\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u043e ACK \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043d\u0430 \u0432\u0441\u0435\u0445 \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0445.</li> </ul>"},{"location":"en/ru/operations/","title":"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438","text":"<ul> <li><code>/healthz</code> \u2014 \u0436\u0438\u0432/\u0433\u043e\u0442\u043e\u0432 (200 ok).</li> <li>\u041b\u043e\u0433\u0438 \u2014 stdout/stderr (Docker best practice).</li> <li>\u041e\u0431\u0440\u0430\u0437 \u2014 distroless:nonroot.</li> <li>\u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 (\u043f\u043b\u0430\u043d): \u043c\u0435\u0442\u0440\u0438\u043a\u0438 Prometheus.</li> </ul>"},{"location":"en/ru/operations/#_2","title":"\u0414\u0435\u043f\u043b\u043e\u0439 \u00ab\u0441\u0442\u0430\u0438\u00bb","text":"<ul> <li>\u041f\u043e\u0434\u043d\u0438\u043c\u0438\u0442\u0435 3\u20135 \u0443\u0437\u043b\u043e\u0432\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u043e\u0432 \u0432 \u0440\u0430\u0437\u043d\u044b\u0445 \u043e\u0431\u043b\u0430\u043a\u0430\u0445/ASN.</li> <li>\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0435 <code>NODE_ENABLED=true</code> \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 <code>NODE_PEERS</code> \u0434\u043b\u044f \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u0438.</li> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u044b\u0435 \u0434\u043e\u043c\u0435\u043d\u044b/\u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b.</li> </ul>"},{"location":"en/ru/operations/#_3","title":"\u0411\u044d\u043a\u0430\u043f\u044b","text":"<ul> <li>\u0414\u0430\u043c\u043f \u0411\u0414 \u043f\u043e \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044e; \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0432 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u043c \u0432\u0438\u0434\u0435.</li> </ul>"},{"location":"en/ru/protocol/","title":"\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b","text":""},{"location":"en/ru/protocol/#websocket-mvp","title":"WebSocket \u043a\u0430\u0434\u0440\u044b (MVP)","text":"<pre><code>// client -&gt; server\n{ \"type\":\"send\", \"to\":\"&lt;user&gt;\", \"message_id\":\"&lt;uuid&gt;\", \"header_b64\":\"...\", \"nonce_b64\":\"...\", \"cipher_b64\":\"...\" }\n{ \"type\":\"ack\",  \"message_id\":\"&lt;uuid&gt;\", \"ack_pubkey_b64\":\"...\", \"ack_sig_b64\":\"...\" }\n{ \"type\":\"ping\" }\n\n// server -&gt; client\n{ \"type\":\"deliver\", \"to\":\"&lt;user&gt;\", \"message_id\":\"&lt;uuid&gt;\", \"header_b64\":\"...\", \"nonce_b64\":\"...\", \"cipher_b64\":\"...\" }\n{ \"type\":\"pong\" }\n</code></pre> <p><code>ack_pubkey_b64/ack_sig_b64</code> \u2014 \u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f. \u0415\u0441\u043b\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e <code>REQUIRE_ACK_SIGNATURE=true</code>, \u0441\u0435\u0440\u0432\u0435\u0440 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 <code>Ed25519.Verify(pub, \"ack:\"+uuid, sig)</code>.</p>"},{"location":"en/ru/protocol/#http-mailbox","title":"HTTP Mailbox","text":"<p>\u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b: <code>/node/put</code>, <code>/node/get</code>, <code>/node/ack</code>. \u0421\u043c. \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0441\u0442\u0438 \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u00ab\u0423\u0437\u043b\u044b\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u0438\u00bb.</p>"},{"location":"en/ru/quickstart/","title":"\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442","text":""},{"location":"en/ru/quickstart/#_2","title":"\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f","text":"<ul> <li>Docker Desktop / Docker Engine</li> <li>\u041f\u043e\u0440\u0442\u044b <code>8080</code> \u0438 <code>5432</code> \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b</li> </ul>"},{"location":"en/ru/quickstart/#docker-compose","title":"\u0417\u0430\u043f\u0443\u0441\u043a \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e (docker-compose)","text":"<pre><code>docker compose up -d --build\ndocker compose logs -f server\ncurl http://localhost:8080/healthz   # -&gt; ok\n</code></pre>"},{"location":"en/ru/quickstart/#_3","title":"\u0420\u0443\u0447\u043d\u043e\u0439 \u0437\u0430\u043f\u0443\u0441\u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0430","text":"<pre><code>export DATABASE_URL=\"postgres://anti:anti@localhost:5432/anti?sslmode=disable\"\ncd server\ngo run ./cmd/server\n</code></pre>"},{"location":"en/ru/quickstart/#-http-api","title":"\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0443\u0437\u043b\u0430-\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u0430 (HTTP API)","text":"<p>\u0412 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f: <pre><code>NODE_ENABLED=true\nREQUIRE_ACK_SIGNATURE=true   # \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)\n</code></pre> \u042d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u043f\u043e\u0434 <code>/node/*</code>. \u0421\u043c. \u00ab\u0423\u0437\u043b\u044b\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u0438\u00bb.</p>"},{"location":"en/ru/roadmap/","title":"\u0414\u043e\u0440\u043e\u0436\u043d\u0430\u044f \u043a\u0430\u0440\u0442\u0430","text":"<ul> <li>[ ] X3DH + Double Ratchet (Signal-\u043f\u043e\u0434\u043e\u0431\u043d\u044b\u0439 \u0440\u0430\u0442\u0447\u0435\u0442)</li> <li>[ ] Sealed sender</li> <li>[ ] \u0420\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u0443\u0437\u043b\u043e\u0432\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u043e\u0432 (k \u0438\u0437 n, erasure coding)</li> <li>[ ] DHT (Kademlia) \u0434\u043b\u044f discovery</li> <li>[ ] \u041d\u0430\u0431\u043b\u044e\u0434\u0430\u0435\u043c\u043e\u0441\u0442\u044c: Prometheus, /readyz, /livez</li> <li>[ ] \u0410\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u044b: gRPC streams, WebRTC DC</li> <li>[ ] \u041a\u043b\u0438\u0435\u043d\u0442\u044b: Desktop (Tauri), Mobile (Flutter)</li> </ul>"},{"location":"en/ru/routing-onion/","title":"P2P \u0438 \u043b\u0443\u043a\u043e\u0432\u0430\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u044f","text":""},{"location":"en/ru/routing-onion/#_1","title":"\u0418\u0434\u0435\u044f","text":"<p>\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0448\u0438\u0444\u0440\u0443\u0435\u0442\u0441\u044f \u0441\u043b\u043e\u044f\u043c\u0438 (\u00ab\u043b\u0443\u043a\u043e\u0432\u0438\u0446\u0430\u00bb) \u0434\u043b\u044f \u0446\u0435\u043f\u043e\u0447\u043a\u0438 hop\u2019\u043e\u0432: \u043a\u0430\u0436\u0434\u044b\u0439 hop \u0437\u043d\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439. \u0423\u0437\u043b\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442 \u0440\u043e\u043b\u044c \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0442\u043e\u0440\u043e\u0432 \u0438/\u0438\u043b\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0445\u0440\u0430\u043d\u0438\u0442\u0435\u043b\u0435\u0439 (store\u2011and\u2011forward).</p>"},{"location":"en/ru/routing-onion/#_2","title":"\u0421\u043b\u043e\u0438","text":"<ul> <li>\u0412\u043d\u0435\u0448\u043d\u0438\u0439 \u0441\u043b\u043e\u0439: \u0430\u0434\u0440\u0435\u0441 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e hop (\u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u043b\u044e\u0447), MAC, TTL.</li> <li>\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0435 \u0441\u043b\u043e\u0438: \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e hop.</li> <li>\u0421\u0430\u043c\u044b\u0439 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0441\u043b\u043e\u0439 \u2014 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0432\u0435\u0440\u0442 \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f (AEAD).</li> </ul>"},{"location":"en/ru/routing-onion/#_3","title":"\u0412\u044b\u0431\u043e\u0440 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430","text":"<ul> <li>3 hop\u2019\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e (\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u0443\u0435\u043c\u043e).</li> <li>\u0412\u044b\u0431\u0438\u0440\u0430\u044e\u0442\u0441\u044f \u0438\u0437 \u043f\u0443\u043b\u0430 \u0443\u0437\u043b\u043e\u0432: \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e, \u0441 \u0443\u0447\u0451\u0442\u043e\u043c \u0440\u0430\u0437\u043d\u043e\u043e\u0431\u0440\u0430\u0437\u0438\u044f ASN/\u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u043e\u0432.</li> <li>\u0414\u043b\u044f \u043e\u0444\u043b\u0430\u0439\u043d\u2011\u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 hop \u2014 \u043e\u0434\u0438\u043d \u0438\u0437 \u0443\u0437\u043b\u043e\u0432\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u043e\u0432 \u0441\u0442\u0430\u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f.</li> </ul> <pre><code>flowchart LR\n    A[\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c] --&gt; H1[Hop 1]\n    H1 --&gt; H2[Hop 2]\n    H2 --&gt; H3[Hop 3 / Mailbox]\n    H3 --&gt; B[\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044c]\n</code></pre>"},{"location":"en/ru/security/","title":"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","text":""},{"location":"en/ru/security/#_2","title":"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u0443\u0433\u0440\u043e\u0437\u044b","text":"<ul> <li>\u041f\u0430\u0441\u0441\u0438\u0432\u043d\u044b\u0439 \u043d\u0430\u0431\u043b\u044e\u0434\u0430\u0442\u0435\u043b\u044c \u0441\u0435\u0442\u0438 (DPI, \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440).</li> <li>\u0427\u0430\u0441\u0442\u0438\u0447\u043d\u043e \u0437\u043b\u043e\u043d\u0430\u043c\u0435\u0440\u0435\u043d\u043d\u044b\u0435 \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0442\u043e\u0440\u044b.</li> <li>\u041f\u043e\u0442\u0435\u0440\u044f \u0443\u0437\u043b\u0430\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u0430.</li> <li>\u041f\u043e\u0432\u0442\u043e\u0440\u044b/\u0441\u043f\u0430\u043c/\u043f\u0435\u0440\u0435\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439.</li> </ul>"},{"location":"en/ru/security/#_3","title":"\u041c\u0435\u0440\u044b","text":"<ul> <li>E2EE: \u0441\u0435\u0440\u0432\u0435\u0440\u044b \u0432\u0438\u0434\u044f\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0430\u0434\u0434\u0438\u043d\u0433\u043e\u0432\u044b\u0439 \u043a\u043e\u043d\u0432\u0435\u0440\u0442 (AEAD).</li> <li>Sealed sender (\u043f\u043b\u0430\u043d): \u0441\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044f \u043e\u0442 \u0440\u0435\u043b\u0435\u0435\u0432.</li> <li>\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 ACK (Ed25519): \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043c\u043e\u0436\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446 inbox.</li> <li>\u0418\u0434\u0435\u043c\u043f\u043e\u0442\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c \u043f\u043e <code>message_id</code> (UUIDv7/ULID).</li> <li>PoW/\u043a\u0432\u043e\u0442\u044b/\u0431\u0430\u043d \u043f\u043e \u043a\u043b\u044e\u0447\u0443 \u043d\u0430 <code>PUT</code>.</li> <li>\u041b\u043e\u0433\u0438 \u0431\u0435\u0437 payload/PII; \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u044d\u043a\u0430\u043f\u043e\u0432 \u0411\u0414.</li> </ul>"},{"location":"en/ru/storage/","title":"\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 (PostgreSQL)","text":""},{"location":"en/ru/storage/#messages","title":"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 <code>messages</code>","text":"<pre><code>CREATE TABLE IF NOT EXISTS messages (\n  id           UUID PRIMARY KEY,\n  to_user      TEXT        NOT NULL,\n  header       BYTEA,\n  nonce        BYTEA       NOT NULL,\n  cipher       BYTEA       NOT NULL,\n  created_at   TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n  delivered_at TIMESTAMPTZ,\n  expires_at   TIMESTAMPTZ\n);\nCREATE INDEX IF NOT EXISTS idx_inbox_pending\n  ON messages (to_user, created_at) WHERE delivered_at IS NULL;\nCREATE INDEX IF NOT EXISTS idx_expiry ON messages (expires_at);\n</code></pre> <ul> <li>\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0443\u0434\u0430\u043b\u044f\u044e\u0442\u0441\u044f \u0441\u043f\u0443\u0441\u0442\u044f <code>RETAIN_DELIVERED_MINUTES</code>.</li> <li>\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u2014 \u043f\u043e <code>RETAIN_UNDELIVERED_DAYS</code>.</li> <li>\u0423\u0437\u043b\u044b\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0440\u0435\u043f\u043b\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e <code>NODE_PEERS</code> (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e).</li> </ul>"},{"location":"en/ru/adr/0001-project-rename-and-goals/","title":"ADR-0001: \u041f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0438 \u0446\u0435\u043b\u0438","text":"<p>\u0414\u0430\u0442\u0430: 2025-08-14 \u0421\u0442\u0430\u0442\u0443\u0441: \u041f\u0440\u0438\u043d\u044f\u0442\u043e</p>"},{"location":"en/ru/adr/0001-project-rename-and-goals/#_1","title":"\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442","text":"<p>\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u0438\u043c\u044f AntiPidorandel \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u043e \u043d\u0430 Spirit. \u0423\u0442\u043e\u0447\u043d\u0435\u043d\u044b \u0446\u0435\u043b\u0438: P2P/store-and-forward, \u043b\u0443\u043a\u043e\u0432\u0430\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u044f, \u0436\u0438\u0432\u0443\u0447\u0435\u0441\u0442\u044c \u0431\u0435\u0437 VPN.</p>"},{"location":"en/ru/adr/0001-project-rename-and-goals/#_2","title":"\u0420\u0435\u0448\u0435\u043d\u0438\u0435","text":"<ul> <li>\u0420\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439 \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u0432\u0435\u0434\u0443\u0442\u0441\u044f \u043f\u043e\u0434 \u0438\u043c\u0435\u043d\u0435\u043c Spirit.</li> <li>\u0424\u043e\u043a\u0443\u0441 \u043d\u0430 \u043c\u0438\u043d\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u0435\u0442\u0430\u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438 \u043a \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430\u043c.</li> </ul>"},{"location":"en/ru/adr/0001-project-rename-and-goals/#_3","title":"\u041f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f","text":"<ul> <li>\u0415\u0434\u0438\u043d\u044b\u0439 \u0431\u0440\u0435\u043d\u0434/\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435; roadmap \u0438 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b.</li> </ul>"},{"location":"en/ru/adr/0002-choose-go-postgres/","title":"ADR-0002: \u0412\u044b\u0431\u043e\u0440 Go + PostgreSQL","text":"<p>\u0414\u0430\u0442\u0430: 2025-08-14 \u0421\u0442\u0430\u0442\u0443\u0441: \u041f\u0440\u0438\u043d\u044f\u0442\u043e</p>"},{"location":"en/ru/adr/0002-choose-go-postgres/#_1","title":"\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442","text":"<p>\u041d\u0443\u0436\u0435\u043d \u0431\u044b\u0441\u0442\u0440\u044b\u0439 \u0438 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0432 \u0434\u0435\u043f\u043b\u043e\u0435 \u0441\u0442\u0435\u043a \u0441 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044f\u043c\u0438.</p>"},{"location":"en/ru/adr/0002-choose-go-postgres/#_2","title":"\u0420\u0435\u0448\u0435\u043d\u0438\u0435","text":"<ul> <li>Backend: Go 1.23+ (<code>gorilla/websocket</code>, <code>pgx</code>).</li> <li>\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435: PostgreSQL 16+ (\u0438\u043d\u0434\u0435\u043a\u0441\u044b, \u043d\u0430\u0434\u0451\u0436\u043d\u043e\u0441\u0442\u044c, \u043f\u0440\u043e\u0441\u0442\u044b\u0435 TTL-\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0438).</li> </ul>"},{"location":"en/ru/adr/0002-choose-go-postgres/#_3","title":"\u0410\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u044b","text":"<ul> <li>Rust/Node \u2014 \u043e\u0442\u043b\u043e\u0436\u0435\u043d\u044b \u0434\u043e \u043f\u043e\u0441\u0442\u2011MVP \u0440\u0430\u0434\u0438 time\u2011to\u2011market.</li> </ul>"},{"location":"en/ru/adr/0002-choose-go-postgres/#_4","title":"\u041f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f","text":"<ul> <li>\u0412\u044b\u0441\u043e\u043a\u0430\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0438 \u043f\u0440\u043e\u0441\u0442\u043e\u0442\u0430 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438.</li> </ul>"},{"location":"en/ru/adr/0003-ws-frame-contract/","title":"ADR-0003: \u041a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u043a\u0430\u0434\u0440\u043e\u0432 WebSocket","text":"<p>\u0414\u0430\u0442\u0430: 2025-08-14 \u0421\u0442\u0430\u0442\u0443\u0441: \u041f\u0440\u0438\u043d\u044f\u0442\u043e</p>"},{"location":"en/ru/adr/0003-ws-frame-contract/#_1","title":"\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442","text":"<p>\u041d\u0443\u0436\u0435\u043d \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0438 \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u044b\u0439 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0438 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f.</p>"},{"location":"en/ru/adr/0003-ws-frame-contract/#_2","title":"\u0420\u0435\u0448\u0435\u043d\u0438\u0435","text":"<ul> <li>\u0422\u0438\u043f\u044b: <code>send</code>, <code>deliver</code>, <code>ack</code>, <code>ping</code>, <code>pong</code>.</li> <li>\u0411\u0438\u043d\u0430\u0440\u043d\u044b\u0435 \u043f\u043e\u043b\u044f \u2014 base64.</li> <li>\u0418\u0434\u0435\u043c\u043f\u043e\u0442\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c \u043f\u043e <code>message_id</code>.</li> <li>\u041e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e \u2014 <code>ack_pubkey_b64</code> \u0438 <code>ack_sig_b64</code> (Ed25519).</li> </ul>"},{"location":"en/ru/adr/0003-ws-frame-contract/#_3","title":"\u041f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f","text":"<ul> <li>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u0438 ACK.</li> </ul>"},{"location":"en/ru/adr/0004-mailbox-node-api/","title":"ADR-0004: Mailbox Node API","text":"<p>\u0414\u0430\u0442\u0430: 2025-08-14 \u0421\u0442\u0430\u0442\u0443\u0441: \u041f\u0440\u0438\u043d\u044f\u0442\u043e</p>"},{"location":"en/ru/adr/0004-mailbox-node-api/#_1","title":"\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442","text":"<p>\u041d\u0443\u0436\u0435\u043d \u0441\u043b\u043e\u0439 store-and-forward \u0431\u0435\u0437 \u0435\u0434\u0438\u043d\u043e\u0439 \u0442\u043e\u0447\u043a\u0438 \u043e\u0442\u043a\u0430\u0437\u0430.</p>"},{"location":"en/ru/adr/0004-mailbox-node-api/#_2","title":"\u0420\u0435\u0448\u0435\u043d\u0438\u0435","text":"<ul> <li>HTTP API <code>/node/put</code>, <code>/node/get</code>, <code>/node/ack</code>.</li> <li>\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 ACK (Ed25519) \u043f\u043e \u0441\u0442\u0440\u043e\u043a\u0435 <code>ack:&lt;uuid&gt;</code> (\u043e\u043f\u0446.).</li> <li>\u0420\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u043d\u0430 <code>NODE_PEERS</code> (best-effort).</li> </ul>"},{"location":"en/ru/adr/0004-mailbox-node-api/#_3","title":"\u041f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f","text":"<ul> <li>\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0434\u0430\u0436\u0435 \u043f\u0440\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0435\u043d\u0430.</li> </ul>"},{"location":"en/ru/adr/0005-censorship-resilience/","title":"ADR-0005: \u0426\u0435\u043d\u0437\u0443\u0440\u043e\u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c","text":"<p>\u0414\u0430\u0442\u0430: 2025-08-14 \u0421\u0442\u0430\u0442\u0443\u0441: \u041f\u0440\u0438\u043d\u044f\u0442\u043e</p>"},{"location":"en/ru/adr/0005-censorship-resilience/#_1","title":"\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442","text":"<p>\u041d\u0443\u0436\u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0430 \u0432 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0441\u0435\u0442\u0435\u0432\u044b\u0445 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043e\u043a \u0431\u0435\u0437 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e VPN.</p>"},{"location":"en/ru/adr/0005-censorship-resilience/#_2","title":"\u0420\u0435\u0448\u0435\u043d\u0438\u0435","text":"<ul> <li>\u041b\u0435\u0441\u0442\u043d\u0438\u0446\u0430 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043e\u0432: H3 \u2192 H2/WS \u2192 SSE/long-poll \u2192 TURN/WebRTC.</li> <li>\u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u043e\u043c\u0435\u043d\u043e\u0432/ASN; \u0441\u0442\u0430\u0438 \u0443\u0437\u043b\u043e\u0432\u2011\u043f\u043e\u0447\u0442\u043e\u0432\u0438\u043a\u043e\u0432.</li> <li>\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0431\u0443\u0442\u0441\u0442\u0440\u0430\u043f\u2011\u043c\u0430\u043d\u0438\u0444\u0435\u0441\u0442 \u0438\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u043e\u0432.</li> </ul>"},{"location":"en/ru/adr/0005-censorship-resilience/#_3","title":"\u041f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f","text":"<ul> <li>\u041f\u043e\u0432\u044b\u0448\u0435\u043d\u043d\u0430\u044f \u0436\u0438\u0432\u0443\u0447\u0435\u0441\u0442\u044c; \u0441\u043b\u043e\u0436\u043d\u0435\u0435 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u044f (\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u043e\u0432).</li> </ul>"},{"location":"en/ru/adr/discovery/","title":"\u041e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u0438\u0435 \u0438 \u0431\u0443\u0442\u0441\u0442\u0440\u0430\u043f","text":""},{"location":"en/ru/adr/discovery/#_2","title":"\u0411\u0443\u0442\u0441\u0442\u0440\u0430\u043f\u2011\u043c\u0430\u043d\u0438\u0444\u0435\u0441\u0442","text":"<ul> <li>\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0441\u043e \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0434\u043e\u043c\u0435\u043d\u043e\u0432, IP, \u043f\u043e\u0440\u0442\u043e\u0432 \u0438 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043e\u0432 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043e\u0432.</li> <li>\u0420\u0430\u0441\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u00ab\u0432\u0438\u0442\u0440\u0438\u043d\u00bb (GitHub Pages, \u0437\u0435\u0440\u043a\u0430\u043b\u0430, \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u0430\u0439\u0442).</li> <li>\u041a\u043b\u0438\u0435\u043d\u0442 \u043a\u044d\u0448\u0438\u0440\u0443\u0435\u0442 \u0438 \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442; \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u043f\u043e\u0434\u043f\u0438\u0441\u044c \u043a\u043b\u044e\u0447\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0430.</li> </ul>"},{"location":"en/ru/adr/discovery/#dht","title":"DHT (\u043f\u043e\u0437\u0436\u0435)","text":"<ul> <li>Kademlia: <code>hash(PubKey) -&gt; swarm \u0443\u0437\u043b\u043e\u0432</code>.</li> <li>\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0437\u0430\u043f\u0438\u0441\u0435\u0439: \u043f\u043e\u0434\u043f\u0438\u0441\u0438 + rate\u2011limit.</li> </ul>"},{"location":"en/ru/adr/discovery/#happyeyeballs","title":"Happy\u2011eyeballs \u0434\u043b\u044f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043e\u0432","text":"<ul> <li>\u041a\u043b\u0438\u0435\u043d\u0442 \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0431\u0443\u0435\u0442 H3\u2192H2/WS\u2192SSE/long\u2011poll\u2192TURN/WebRTC \u0438 \u0432\u044b\u0431\u0438\u0440\u0430\u0435\u0442 \u043f\u0435\u0440\u0432\u044b\u0439 \u0443\u0441\u043f\u0435\u0448\u043d\u044b\u0439 \u043f\u0443\u0442\u044c.</li> </ul>"}]}